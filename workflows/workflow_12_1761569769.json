{"id":"206247b6-9fec-4ed2-8927-e4f388c674d4","revision":0,"last_node_id":163,"last_link_id":281,"nodes":[{"id":122,"type":"easy indexAnything","pos":[440,250],"size":[270,58],"flags":{},"order":33,"mode":0,"inputs":[{"name":"any","type":"*","link":226},{"name":"index","type":"INT","widget":{"name":"index"},"link":206}],"outputs":[{"name":"out","type":"*","links":[205]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"71c7865d2d3c934ccb99f24171e08ae5a81148ac","Node name for S&R":"easy indexAnything","widget_ue_connectable":{"index":true}},"widgets_values":[0]},{"id":110,"type":"easy forLoopStart","pos":[120,270],"size":[270,138],"flags":{},"order":29,"mode":0,"inputs":[{"name":"initial_value1","shape":7,"type":"*","link":null},{"name":"total","type":"INT","widget":{"name":"total"},"link":216},{"name":"initial_value2","type":"*","link":null}],"outputs":[{"name":"flow","shape":5,"type":"FLOW_CONTROL","links":[199]},{"name":"index","type":"INT","links":[206]},{"name":"value1","type":"*","links":[229]},{"name":"value2","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"71c7865d2d3c934ccb99f24171e08ae5a81148ac","Node name for S&R":"easy forLoopStart","widget_ue_connectable":{"total":true}},"widgets_values":[3],"color":"#223","bgcolor":"#335"},{"id":130,"type":"easy batchAnything","pos":[460,360],"size":[140,46],"flags":{},"order":38,"mode":0,"inputs":[{"name":"any_1","type":"*","link":229},{"name":"any_2","type":"*","link":230}],"outputs":[{"name":"batch","type":"*","links":[228]}],"properties":{"cnr_id":"comfyui-easy-use","ver":"de92038f88317699f314be85e5c7af84f1ab9c3a","Node name for S&R":"easy batchAnything","widget_ue_connectable":{}},"widgets_values":[]},{"id":84,"type":"SetNode","pos":[440,460],"size":[210,60],"flags":{"collapsed":true},"order":34,"mode":0,"inputs":[{"name":"*","type":"*","link":205}],"outputs":[{"name":"*","type":"*","links":[121]}],"title":"Set_InputAudio","properties":{"previousName":"InputAudio","widget_ue_connectable":{}},"widgets_values":["InputAudio"],"color":"#323","bgcolor":"#535"},{"id":121,"type":"easy forLoopEnd","pos":[770,250],"size":[163.08984375,86],"flags":{},"order":39,"mode":0,"inputs":[{"name":"flow","shape":5,"type":"FLOW_CONTROL","link":199},{"name":"initial_value1","shape":7,"type":"*","link":228},{"name":"initial_value2","type":"*","link":227},{"name":"initial_value3","type":"*","link":null}],"outputs":[{"name":"value1","type":"*","links":[231]},{"name":"value2","type":"*","links":[]},{"name":"value3","type":"*","links":null}],"properties":{"cnr_id":"comfyui-easy-use","ver":"71c7865d2d3c934ccb99f24171e08ae5a81148ac","Node name for S&R":"easy forLoopEnd","widget_ue_connectable":{}},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":124,"type":"WanVideoUni3C_embeds","pos":[1230,-50],"size":[270,146],"flags":{},"order":32,"mode":0,"inputs":[{"name":"controlnet","type":"WANVIDEOCONTROLNET","link":219},{"name":"render_latent","type":"LATENT","link":220},{"name":"render_mask","shape":7,"type":"MASK","link":null}],"outputs":[{"name":"uni3c_embeds","type":"UNI3C_EMBEDS","links":[218]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"2da36b7fdaa9da9cf38785116917adf3974387da","Node name for S&R":"WanVideoUni3C_embeds","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":[1,0,1]},{"id":125,"type":"WanVideoUni3C_ControlnetLoader","pos":[1180,-270],"size":[322.4781188964844,154],"flags":{},"order":0,"mode":0,"inputs":[{"name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":null}],"outputs":[{"name":"controlnet","type":"WANVIDEOCONTROLNET","links":[219]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"2da36b7fdaa9da9cf38785116917adf3974387da","Node name for S&R":"WanVideoUni3C_ControlnetLoader","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["Wan21_Uni3C_controlnet_fp16.safetensors","fp16","fp8_e4m3fn","offload_device","sageattn"]},{"id":126,"type":"WanVideoEncode","pos":[900,-140],"size":[270,242],"flags":{},"order":27,"mode":0,"inputs":[{"name":"vae","type":"WANVAE","link":221},{"name":"image","type":"IMAGE","link":222},{"name":"mask","shape":7,"type":"MASK","link":null}],"outputs":[{"name":"samples","type":"LATENT","links":[220]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"2da36b7fdaa9da9cf38785116917adf3974387da","Node name for S&R":"WanVideoEncode","widget_ue_connectable":{}},"widgets_values":[false,272,272,144,128,0,1]},{"id":128,"type":"RepeatImageBatch","pos":[880,-250],"size":[270,58],"flags":{},"order":21,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":223},{"name":"amount","type":"INT","widget":{"name":"amount"},"link":224}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[222]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"RepeatImageBatch","widget_ue_connectable":{}},"widgets_values":[1]},{"id":78,"type":"CreateCFGScheduleFloatList","pos":[100,-130],"size":[340,180],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"float_list","type":"FLOAT","links":[113]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"e3afc7fc758add9ba0ca7e6e219c30f312758484","Node name for S&R":"CreateCFGScheduleFloatList","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":[10,5,5,"linear",0,0.1]},{"id":73,"type":"FantasyTalkingWav2VecEmbeds","pos":[480,-130],"size":[280.4765625,170],"flags":{},"order":35,"mode":0,"inputs":[{"name":"wav2vec_model","type":"WAV2VECMODEL","link":99},{"name":"fantasytalking_model","type":"FANTASYTALKINGMODEL","link":100},{"name":"audio","type":"AUDIO","link":121},{"name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":112},{"name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":189},{"name":"audio_cfg_scale","type":"FLOAT","widget":{"name":"audio_cfg_scale"},"link":113}],"outputs":[{"name":"fantasytalking_embeds","type":"FANTASYTALKING_EMBEDS","links":[101]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"df95c85283d7625fbdf664d0133a2e1c114ba14a","Node name for S&R":"FantasyTalkingWav2VecEmbeds","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{"num_frames":true,"fps":true,"audio_cfg_scale":true}},"widgets_values":[81,30,1,1],"color":"#323","bgcolor":"#535"},{"id":71,"type":"DownloadAndLoadWav2VecModel","pos":[470,-270],"size":[355.20001220703125,106],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"wav2vec_model","type":"WAV2VECMODEL","links":[99]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"df95c85283d7625fbdf664d0133a2e1c114ba14a","Node name for S&R":"DownloadAndLoadWav2VecModel","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["facebook/wav2vec2-base-960h","fp16","main_device"],"color":"#323","bgcolor":"#535"},{"id":11,"type":"LoadWanVideoT5TextEncoder","pos":[100,-510],"size":[377.1661376953125,130],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"wan_t5_model","type":"WANTEXTENCODER","slot_index":0,"links":[15]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"LoadWanVideoT5TextEncoder","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["umt5-xxl-enc-fp8_e4m3fn.safetensors","bf16","offload_device","disabled"],"color":"#332922","bgcolor":"#593930"},{"id":16,"type":"WanVideoTextEncode","pos":[520,-630],"size":[420.30511474609375,261.5306701660156],"flags":{},"order":20,"mode":0,"inputs":[{"name":"t5","type":"WANTEXTENCODER","link":15},{"name":"model_to_offload","shape":7,"type":"WANVIDEOMODEL","link":79}],"outputs":[{"name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","slot_index":0,"links":[86]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoTextEncode","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["A woman is talking.","色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",true],"color":"#332922","bgcolor":"#593930"},{"id":28,"type":"WanVideoDecode","pos":[950,-570],"size":[315,198],"flags":{},"order":37,"mode":0,"inputs":[{"name":"vae","type":"WANVAE","link":235},{"name":"samples","type":"LATENT","link":90}],"outputs":[{"name":"images","type":"IMAGE","slot_index":0,"links":[227,230]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoDecode","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":[false,272,272,144,128,"default"],"color":"#322","bgcolor":"#533"},{"id":69,"type":"WanVideoSampler","pos":[1290,-1030],"size":[310,650],"flags":{},"order":36,"mode":0,"inputs":[{"name":"model","type":"WANVIDEOMODEL","link":85},{"name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":87},{"name":"text_embeds","shape":7,"type":"WANVIDEOTEXTEMBEDS","link":86},{"name":"samples","shape":7,"type":"LATENT","link":null},{"name":"feta_args","shape":7,"type":"FETAARGS","link":null},{"name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"name":"cache_args","shape":7,"type":"CACHEARGS","link":null},{"name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"name":"slg_args","shape":7,"type":"SLGARGS","link":null},{"name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":null},{"name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"name":"fantasytalking_embeds","shape":7,"type":"FANTASYTALKING_EMBEDS","link":101},{"name":"uni3c_embeds","shape":7,"type":"UNI3C_EMBEDS","link":218},{"name":"multitalk_embeds","shape":7,"type":"MULTITALK_EMBEDS","link":null},{"name":"teacache_args","shape":7,"type":"TEACACHEARGS","link":null}],"outputs":[{"name":"samples","type":"LATENT","links":[90]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"df95c85283d7625fbdf664d0133a2e1c114ba14a","Node name for S&R":"WanVideoSampler","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":[4,1.0000000000000002,5.000000000000001,0,"fixed",true,"unipc",0,1,false,"comfy"]},{"id":22,"type":"WanVideoModelLoader","pos":[910,-990],"size":[340,280],"flags":{},"order":16,"mode":0,"inputs":[{"name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":null},{"name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":96},{"name":"lora","shape":7,"type":"WANVIDLORA","link":225},{"name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"name":"vace_model","shape":7,"type":"VACEPATH","link":null},{"name":"fantasytalking_model","shape":7,"type":"FANTASYTALKINGMODEL","link":84},{"name":"multitalk_model","shape":7,"type":"MULTITALKMODEL","link":null}],"outputs":[{"name":"model","type":"WANVIDEOMODEL","slot_index":0,"links":[79,85]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoModelLoader","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["Wan2_1-I2V-14B-480P_fp8_e4m3fn.safetensors","fp16_fast","fp8_e4m3fn","offload_device","sageattn"],"color":"#223","bgcolor":"#335"},{"id":129,"type":"WanVideoLoraSelect","pos":[610,-1060],"size":[270,126],"flags":{},"order":4,"mode":0,"inputs":[{"name":"prev_lora","shape":7,"type":"WANVIDLORA","link":null},{"name":"blocks","shape":7,"type":"SELECTEDBLOCKS","link":null}],"outputs":[{"name":"lora","type":"WANVIDLORA","links":[225]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"2da36b7fdaa9da9cf38785116917adf3974387da","Node name for S&R":"WanVideoLoraSelect","widget_ue_connectable":{}},"widgets_values":["Wan\\Wan21_T2V_14B_lightx2v_cfg_step_distill_lora_rank32.safetensors",1.2000000000000002,false]},{"id":38,"type":"WanVideoVAELoader","pos":[90,-660],"size":[372.7727966308594,82],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"vae","type":"WANVAE","slot_index":0,"links":[221,234,235]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoVAELoader","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["Wan2_1_VAE_bf16.safetensors","bf16"],"color":"#322","bgcolor":"#533"},{"id":39,"type":"WanVideoBlockSwap","pos":[540,-860],"size":[315,154],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"block_swap_args","type":"BLOCKSWAPARGS","slot_index":0,"links":[96]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoBlockSwap","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":[30,false,false,true,0],"color":"#223","bgcolor":"#335"},{"id":68,"type":"FantasyTalkingModelLoader","pos":[100,-270],"size":[340.20001220703125,82],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"model","type":"FANTASYTALKINGMODEL","links":[84,100]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"df95c85283d7625fbdf664d0133a2e1c114ba14a","Node name for S&R":"FantasyTalkingModelLoader","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":["fantasytalking_fp16.safetensors","fp16"],"color":"#323","bgcolor":"#535"},{"id":59,"type":"CLIPVisionLoader","pos":[-270,40],"size":[315,58],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[70]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{}},"widgets_values":["clip_vision_h.safetensors"],"color":"#233","bgcolor":"#355"},{"id":123,"type":"AudioListGenerator","pos":[-610,-600],"size":[270,126],"flags":{},"order":25,"mode":0,"inputs":[{"name":"waveform","type":"AUDIO","link":261},{"name":"videofps","type":"FLOAT","widget":{"name":"videofps"},"link":214},{"name":"samplefps","type":"INT","widget":{"name":"samplefps"},"link":215}],"outputs":[{"name":"cycle","type":"INT","links":[216,236]},{"name":"audio_list","shape":6,"type":"AUDIO","links":[226]}],"properties":{"cnr_id":"Listhelper","ver":"e5780332910a2cd51bb49aea56132c87e2ba590a","Node name for S&R":"AudioListGenerator","widget_ue_connectable":{}},"widgets_values":[23.976,81,true]},{"id":131,"type":"DisplayAny","pos":[-620,-770],"size":[270,100],"flags":{},"order":30,"mode":0,"inputs":[{"name":"input","type":"*","link":236}],"outputs":[{"name":"STRING","type":"STRING","links":null}],"title":"LoopSize","properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","Node name for S&R":"DisplayAny","widget_ue_connectable":{}},"widgets_values":["raw value","30"]},{"id":117,"type":"easy float","pos":[-950,-610],"size":[270,58],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"float","type":"FLOAT","links":[189,190,214]}],"title":"Float(FPS)","properties":{"cnr_id":"comfyui-easy-use","ver":"71c7865d2d3c934ccb99f24171e08ae5a81148ac","Node name for S&R":"easy float","widget_ue_connectable":{}},"widgets_values":[25.000000000000004]},{"id":75,"type":"INTConstant","pos":[-950,-500],"size":[270,60],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"INT","links":[111,112,215,224]}],"title":"SampleFrames","properties":{"cnr_id":"comfyui-kjnodes","ver":"c3dc82108a2a86c17094107ead61d63f8c76200e","Node name for S&R":"INTConstant","widget_ue_connectable":{}},"widgets_values":[81],"color":"#1b4669","bgcolor":"#29699c"},{"id":63,"type":"WanVideoImageToVideoEncode","pos":[-280,-810],"size":[330,410],"flags":{},"order":28,"mode":0,"inputs":[{"name":"vae","type":"WANVAE","link":234},{"name":"clip_embeds","shape":7,"type":"WANVIDIMAGE_CLIPEMBEDS","link":82},{"name":"start_image","shape":7,"type":"IMAGE","link":233},{"name":"end_image","shape":7,"type":"IMAGE","link":null},{"name":"control_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":null},{"name":"temporal_mask","shape":7,"type":"MASK","link":null},{"name":"extra_latents","shape":7,"type":"LATENT","link":null},{"name":"add_cond_latents","shape":7,"type":"ADD_COND_LATENTS","link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":109},{"name":"height","type":"INT","widget":{"name":"height"},"link":110},{"name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":111},{"name":"realisdance_latents","shape":7,"type":"REALISDANCELATENTS","link":null}],"outputs":[{"name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","links":[87]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoImageToVideoEncode","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{"width":true,"height":true,"num_frames":true}},"widgets_values":[832,480,81,0.030000000000000006,1,0.9440000000000002,true,false,false],"color":"#2a363b","bgcolor":"#3f5159"},{"id":65,"type":"WanVideoClipVisionEncode","pos":[-280,-290],"size":[327.5999755859375,262],"flags":{},"order":22,"mode":0,"inputs":[{"name":"clip_vision","type":"CLIP_VISION","link":70},{"name":"image_1","type":"IMAGE","link":232},{"name":"image_2","shape":7,"type":"IMAGE","link":null},{"name":"negative_image","shape":7,"type":"IMAGE","link":null}],"outputs":[{"name":"image_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","links":[82]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoClipVisionEncode","aux_id":"kijai/ComfyUI-WanVideoWrapper","widget_ue_connectable":{}},"widgets_values":[1,1,"center","average",true,0,0.5000000000000001],"color":"#233","bgcolor":"#355"},{"id":137,"type":"LayerUtility: PurgeVRAM","pos":[-1420,-610],"size":[270,82],"flags":{},"order":23,"mode":0,"inputs":[{"name":"anything","type":"*","link":242}],"outputs":[],"properties":{"cnr_id":"comfyui_layerstyle","ver":"3bfe8e435d167b4a5bf08716729f89802dbbaa6f","Node name for S&R":"LayerUtility: PurgeVRAM","widget_ue_connectable":{}},"widgets_values":[true,true],"color":"rgba(38, 73, 116, 0.7)"},{"id":30,"type":"VHS_VideoCombine","pos":[1530,-250],"size":[320,334],"flags":{},"order":40,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":231},{"name":"audio","shape":7,"type":"AUDIO","link":260},{"name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"name":"vae","shape":7,"type":"VAE","link":null},{"name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":190}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":[246,264]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"0a75c7958fe320efcb052f1d9f8451fd20c730a8","Node name for S&R":"VHS_VideoCombine","widget_ue_connectable":{"frame_rate":true}},"widgets_values":{"frame_rate":23,"loop_count":0,"filename_prefix":"TTSFT/STEP2","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":true,"paused":false,"params":{"filename":"STEP2_00009-audio.mp4","subfolder":"TTSFT","type":"output","format":"video/h264-mp4","frame_rate":25,"workflow":"STEP2_00009.png","fullpath":"C:\\Users\\dseditor\\CUI\\ComfyUI\\output\\TTSFT\\STEP2_00009-audio.mp4"}}},"color":"#2a363b","bgcolor":"#3f5159"},{"id":58,"type":"LoadImage","pos":[-1560,-300],"size":[420,350],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[238]},{"name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["real_00017_.png","image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":140,"type":"SaveAudio","pos":[-1410,-780],"size":[250,112],"flags":{},"order":24,"mode":0,"inputs":[{"name":"audio","type":"AUDIO","link":245}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"SaveAudio","widget_ue_connectable":{}},"widgets_values":["audio/ComfyUI"]},{"id":151,"type":"VHS_VideoCombine","pos":[2510,-420],"size":[214.7587890625,457.8639221191406],"flags":{},"order":49,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":274},{"name":"audio","shape":7,"type":"AUDIO","link":257},{"name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"name":"vae","shape":7,"type":"VAE","link":null},{"name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":263}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":[]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_VideoCombine","widget_ue_connectable":{}},"widgets_values":{"frame_rate":8,"loop_count":0,"filename_prefix":"TTSFT/STEP4","format":"video/nvenc_hevc-mp4","pix_fmt":"yuv420p","bitrate":10,"megabit":true,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"STEP4_00004-audio.mp4","subfolder":"TTSFT","type":"output","format":"video/nvenc_hevc-mp4","frame_rate":25,"workflow":"STEP4_00004.png","fullpath":"C:\\Users\\dseditor\\CUI\\ComfyUI\\output\\TTSFT\\STEP4_00004-audio.mp4"}}}},{"id":147,"type":"VHS_LoadVideoPath","pos":[1940,-400],"size":[231.8896484375,286],"flags":{},"order":43,"mode":0,"inputs":[{"name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"name":"vae","shape":7,"type":"VAE","link":null},{"name":"video","type":"STRING","widget":{"name":"video"},"link":280}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[254]},{"name":"frame_count","type":"INT","links":null},{"name":"audio","type":"AUDIO","links":[257]},{"name":"video_info","type":"VHS_VIDEOINFO","links":[262]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_LoadVideoPath","widget_ue_connectable":{}},"widgets_values":{"video":"","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"format":"AnimateDiff","videopreview":{"hidden":false,"paused":false,"params":{"filename":"","type":"path","format":"video/","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1}}}},{"id":155,"type":"Fast Groups Bypasser (rgthree)","pos":[-2290,-1180],"size":[390,274],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default","widget_ue_connectable":{}}},{"id":149,"type":"ImageUpscaleWithModel","pos":[2240,-410],"size":[221.98202514648438,46],"flags":{},"order":44,"mode":0,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":255},{"name":"image","type":"IMAGE","link":254}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[267,270]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"ImageUpscaleWithModel","widget_ue_connectable":{}},"widgets_values":[]},{"id":150,"type":"UpscaleModelLoader","pos":[2240,-310],"size":[270,58],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[255]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"UpscaleModelLoader","widget_ue_connectable":{}},"widgets_values":["RealESRGAN_x2.pth"]},{"id":153,"type":"VHS_VideoInfoSource","pos":[2260,-210],"size":[239.6552734375,106],"flags":{},"order":45,"mode":0,"inputs":[{"name":"video_info","type":"VHS_VIDEOINFO","link":262}],"outputs":[{"name":"fps🟨","type":"FLOAT","links":[263,277]},{"name":"frame_count🟨","type":"INT","links":null},{"name":"duration🟨","type":"FLOAT","links":null},{"name":"width🟨","type":"INT","links":null},{"name":"height🟨","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_VideoInfoSource","widget_ue_connectable":{}},"widgets_values":{}},{"id":142,"type":"VHS_SelectFilename","pos":[2270,-30],"size":[219.6669921875,58],"flags":{},"order":41,"mode":0,"inputs":[{"name":"filenames","type":"VHS_FILENAMES","link":246}],"outputs":[{"name":"Filename","type":"STRING","links":[280]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_SelectFilename","widget_ue_connectable":{}},"widgets_values":{"index":2}},{"id":154,"type":"LayerUtility: PurgeVRAM","pos":[750,410],"size":[270,82],"flags":{},"order":42,"mode":0,"inputs":[{"name":"anything","type":"*","link":264}],"outputs":[],"properties":{"cnr_id":"comfyui_layerstyle","ver":"3bfe8e435d167b4a5bf08716729f89802dbbaa6f","Node name for S&R":"LayerUtility: PurgeVRAM","widget_ue_connectable":{}},"widgets_values":[true,true],"color":"rgba(38, 73, 116, 0.7)"},{"id":133,"type":"IndexTTSRun","pos":[-1830,-750],"size":[334.109375,338],"flags":{},"order":18,"mode":0,"inputs":[{"name":"audio","type":"AUDIO","link":243},{"name":"text","type":"STRING","link":244},{"name":"dialogue_audio_s2","shape":7,"type":"AUDIO","link":null}],"outputs":[{"name":"audio","type":"AUDIO","links":[242,245,260,261,281]}],"properties":{"cnr_id":"indextts-mw","ver":"6f2de5cbacafbbf46793ddbf630940d231894d83","Node name for S&R":"IndexTTSRun","widget_ue_connectable":{}},"widgets_values":["v1.5",30,0.8,1,3,1000,120,4,true,false,true]},{"id":156,"type":"GeminiAPI","pos":[-1820,-1310],"size":[270,400],"flags":{},"order":26,"mode":0,"inputs":[{"name":"image","shape":7,"type":"IMAGE","link":null},{"name":"video","shape":7,"type":"IMAGE","link":null},{"name":"audio","shape":7,"type":"AUDIO","link":281},{"name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":278}],"outputs":[{"name":"text","type":"STRING","links":[266,276]}],"properties":{"cnr_id":"comfyui-ollamagemini","ver":"b508a7581a665b56fe4fd24dad75b96db650228c","Node name for S&R":"GeminiAPI","widget_ue_connectable":{}},"widgets_values":["What is the meaning of life?","audio","gemini-2.5-flash-preview-05-20",false,false,"Custom","Return only the prompt text itself. No explanations or formatting.","raw_text"]},{"id":163,"type":"StringFunction|pysssss","pos":[-1530,-1260],"size":[230,350],"flags":{},"order":19,"mode":0,"inputs":[{"name":"text_c","shape":7,"type":"STRING","widget":{"name":"text_c"},"link":279}],"outputs":[{"name":"STRING","type":"STRING","links":[278]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"StringFunction|pysssss","widget_ue_connectable":{}},"widgets_values":["replace","yes","Read the audio file and generate an English LRC subtitle file based on the provided TOPIC text. The subtitles must be time-synced, and each segment should not exceed four seconds.","TOPIC","","Read the audio file and generate an English LRC subtitle file based on the provided A Simple Introduction to the Workflow for Creating Speaking Videos Longer Than One Minute\nThis workflow uses IndexTTS for text-to-speech, but you can replace it with any other TTS system. After TTS is completed, subtitles are generated using Gemini, which requires an API key. You should check whether the automatically generated subtitles are accurate. Since TTS processing is quick, it’s not a problem to rerun it if the subtitles are incorrect.\nAfter the audio is completed, the video section begins. By default, each sampling generates 81 frames at 25 frames per second, split into segments. If you have a more powerful GPU, you can increase the number of frames per segment or the frame rate. There’s no need to manually split the audio; just set the frame count and frame rate. This workflow uses the standard Wan model and a low-step LoRA.\nFor the final upscaling stage, the default output resolution is 720p. Due to memory constraints, the sampling resolution is set to half the target resolution.\nMost tutorials on Wan-based video generation only show short 5-second clips and don’t explain how to make longer videos. This workflow adopts a segmented approach, allowing you to complete the entire speaking sequence even on a 12GB VRAM setup. Of course, this segmented method may cause occasional stutters in the video or limited variety in motion. text. The subtitles must be time-synced, and each segment should not exceed four seconds."]},{"id":160,"type":"ImageFromBatch","pos":[-1800,-1440],"size":[270,82],"flags":{},"order":46,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":270}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[271]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"ImageFromBatch","widget_ue_connectable":{}},"widgets_values":[1,1]},{"id":158,"type":"AddSubtitlesToVideo","pos":[-930,-1290],"size":[306.08984375,362],"flags":{},"order":48,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":267},{"name":"json_text","shape":7,"type":"STRING","link":null},{"name":"subtitle_text","shape":7,"type":"STRING","link":266},{"name":"width","type":"INT","widget":{"name":"width"},"link":272},{"name":"height","type":"INT","widget":{"name":"height"},"link":273},{"name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":277}],"outputs":[{"name":"image","type":"IMAGE","links":[274]}],"properties":{"cnr_id":"audiotools","ver":"b05ed6dbc2a2eb19a757d6a6d21b53ebf1558b18","Node name for S&R":"AddSubtitlesToVideo","widget_ue_connectable":{}},"widgets_values":["English_word",25,"C:\\Users\\dseditor\\CUI\\ComfyUI\\custom_nodes\\ComfyUI_AudioTools\\ChironGoRoundTC-600SB.ttf",32,"yellow","",-250,0,1024,1024,20,6]},{"id":161,"type":"GetImageSize+","pos":[-910,-1420],"size":[159.50155639648438,66],"flags":{},"order":47,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":271}],"outputs":[{"name":"width","type":"INT","links":[272]},{"name":"height","type":"INT","links":[273]},{"name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","Node name for S&R":"GetImageSize+","widget_ue_connectable":{}},"widgets_values":[]},{"id":74,"type":"ImageResizeKJv2","pos":[-960,-340],"size":[315,266],"flags":{},"order":17,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":238}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[223,232,233]},{"name":"width","type":"INT","links":[109]},{"name":"height","type":"INT","links":[110]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"c3dc82108a2a86c17094107ead61d63f8c76200e","Node name for S&R":"ImageResizeKJv2","widget_ue_connectable":{}},"widgets_values":[640,360,"lanczos","resize","0, 0, 0","center",16,"cpu"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":138,"type":"LoadAudio","pos":[-2170,-820],"size":[274.080078125,136],"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"AUDIO","type":"AUDIO","links":[243]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"LoadAudio","widget_ue_connectable":{}},"widgets_values":["normalsoft.flac",null,null]},{"id":139,"type":"TextBox1","pos":[-2270,-640],"size":[420,260],"flags":{},"order":15,"mode":0,"inputs":[],"outputs":[{"name":"text1","type":"STRING","links":[244,279]}],"properties":{"cnr_id":"RES4LYF","ver":"7c3fc0aefc865cbf1a89dd9aa3d113fdb97625f4","Node name for S&R":"TextBox1","widget_ue_connectable":{}},"widgets_values":["A Simple Introduction to the Workflow for Creating Speaking Videos Longer Than One Minute\nThis workflow uses IndexTTS for text-to-speech, but you can replace it with any other TTS system. After TTS is completed, subtitles are generated using Gemini, which requires an API key. You should check whether the automatically generated subtitles are accurate. Since TTS processing is quick, it’s not a problem to rerun it if the subtitles are incorrect.\nAfter the audio is completed, the video section begins. By default, each sampling generates 81 frames at 25 frames per second, split into segments. If you have a more powerful GPU, you can increase the number of frames per segment or the frame rate. There’s no need to manually split the audio; just set the frame count and frame rate. This workflow uses the standard Wan model and a low-step LoRA.\nFor the final upscaling stage, the default output resolution is 720p. Due to memory constraints, the sampling resolution is set to half the target resolution.\nMost tutorials on Wan-based video generation only show short 5-second clips and don’t explain how to make longer videos. This workflow adopts a segmented approach, allowing you to complete the entire speaking sequence even on a 12GB VRAM setup. Of course, this segmented method may cause occasional stutters in the video or limited variety in motion."]},{"id":162,"type":"ShowText|pysssss","pos":[-1270,-1450],"size":[330,530],"flags":{},"order":31,"mode":0,"inputs":[{"name":"text","type":"STRING","link":276}],"outputs":[{"name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"ShowText|pysssss","widget_ue_connectable":{}},"widgets_values":["```lrc\n[00:00.088]A Simple Introduction to the Workflow for Creating Speaking Videos Longer Than One Minute.\n[00:05.348]This workflow uses IndexTTS for text-to-speech,\n[00:08.708]but you can replace it with any other TTS system.\n[00:12.068]After TTS is completed,\n[00:14.398]subtitles are generated using Gemini,\n[00:17.068]which requires an API key.\n[00:19.418]You should check whether the automatically generated subtitles are accurate.\n[00:24.238]Since TTS processing is quick,\n[00:26.328]it's not a problem to rerun it if the subtitles are incorrect.\n[00:30.938]After the audio is completed, the video section begins.\n[00:34.258]By default, each sampling generates 81 frames at 25 frames per second,\n[00:41.488]split into segments.\n[00:42.598]If you have a more powerful GPU,\n[00:44.698]you can increase the number of frames per segment or the frame rate.\n[00:49.128]There's no need to manually split the audio;\n[00:51.688]just set the frame count and frame rate.\n[00:54.498]This workflow uses the standard Wan model and a low-step LoRA.\n[00:59.088]For the final upscaling stage,\n[01:01.448]the default output resolution is 720p.\n[01:05.148]Due to memory constraints, the sampling resolution is set to half the target resolution.\n[01:10.598]Most tutorials on Wan-based video generation only show short 5-second clips\n[01:16.038]and don't explain how to make longer videos.\n[01:18.778]This workflow adopts a segmented approach,\n[01:22.258]allowing you to complete the entire speaking sequence even on a 12 GB VRAM setup.\n[01:28.468]Of course, this segmented method may cause occasional stutters in the video\n[01:34.118]or limited variety in motion.\n[01:35.308]text. The subtitles must be time-synced, and each segment should not exceed four seconds.\n```"]}],"links":[[15,11,0,16,0,"WANTEXTENCODER"],[70,59,0,65,0,"CLIP_VISION"],[79,22,0,16,1,"WANVIDEOMODEL"],[82,65,0,63,1,"WANVIDIMAGE_CLIPEMBEDS"],[84,68,0,22,5,"FANTASYTALKINGMODEL"],[85,22,0,69,0,"WANVIDEOMODEL"],[86,16,0,69,2,"WANVIDEOTEXTEMBEDS"],[87,63,0,69,1,"WANVIDIMAGE_EMBEDS"],[90,69,0,28,1,"LATENT"],[96,39,0,22,1,"BLOCKSWAPARGS"],[99,71,0,73,0,"WAV2VECMODEL"],[100,68,0,73,1,"FANTASYTALKINGMODEL"],[101,73,0,69,13,"FANTASYTALKING_EMBEDS"],[109,74,1,63,8,"INT"],[110,74,2,63,9,"INT"],[111,75,0,63,10,"INT"],[112,75,0,73,3,"INT"],[113,78,0,73,5,"FLOAT"],[121,84,0,73,2,"AUDIO"],[189,117,0,73,4,"FLOAT"],[190,117,0,30,4,"FLOAT"],[199,110,0,121,0,"FLOW_CONTROL"],[205,122,0,84,0,"AUDIO"],[206,110,1,122,1,"INT"],[214,117,0,123,1,"FLOAT"],[215,75,0,123,2,"INT"],[216,123,0,110,1,"INT"],[218,124,0,69,14,"UNI3C_EMBEDS"],[219,125,0,124,0,"WANVIDEOCONTROLNET"],[220,126,0,124,1,"LATENT"],[221,38,0,126,0,"WANVAE"],[222,128,0,126,1,"IMAGE"],[223,74,0,128,0,"IMAGE"],[224,75,0,128,1,"INT"],[225,129,0,22,2,"WANVIDLORA"],[226,123,1,122,0,"*"],[227,28,0,121,2,"*"],[228,130,0,121,1,"*"],[229,110,2,130,0,"*"],[230,28,0,130,1,"*"],[231,121,0,30,0,"IMAGE"],[232,74,0,65,1,"IMAGE"],[233,74,0,63,2,"IMAGE"],[234,38,0,63,0,"WANVAE"],[235,38,0,28,0,"WANVAE"],[236,123,0,131,0,"*"],[238,58,0,74,0,"IMAGE"],[242,133,0,137,0,"*"],[243,138,0,133,0,"AUDIO"],[244,139,0,133,1,"STRING"],[245,133,0,140,0,"AUDIO"],[246,30,0,142,0,"VHS_FILENAMES"],[254,147,0,149,1,"IMAGE"],[255,150,0,149,0,"UPSCALE_MODEL"],[257,147,2,151,1,"AUDIO"],[260,133,0,30,1,"AUDIO"],[261,133,0,123,0,"AUDIO"],[262,147,3,153,0,"VHS_VIDEOINFO"],[263,153,0,151,4,"FLOAT"],[264,30,0,154,0,"*"],[266,156,0,158,2,"STRING"],[267,149,0,158,0,"IMAGE"],[270,149,0,160,0,"IMAGE"],[271,160,0,161,0,"IMAGE"],[272,161,0,158,3,"INT"],[273,161,1,158,4,"INT"],[274,158,0,151,0,"IMAGE"],[276,156,0,162,0,"STRING"],[277,153,0,158,5,"FLOAT"],[278,163,0,156,3,"STRING"],[279,139,0,163,0,"STRING"],[280,142,0,147,2,"STRING"],[281,133,0,156,2,"AUDIO"]],"groups":[{"id":1,"title":"LoopPart","bounding":[80,170,1013.08984375,355.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Uni3CPart","bounding":[870,-340,1030,490],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"STEP2：WanPart","bounding":[80,-1130,1530,775.1306762695312],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"FantasyTalikingPart","bounding":[90,-340,745.2000122070312,403.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":5,"title":"STEP1：TTS","bounding":[-2280,-870,1140,483.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"STEP2：ImageAndAudioCrop","bounding":[-1100,-880,1160,991.5999755859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"STEP4：UpscaleModelAndSubtitle","bounding":[1930,-510,860,680],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"OPT：Subtitle (Check it At Start)(If you Don't need bypass the group)","bounding":[-1830,-1520,1230,620],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.45000000000000123,"offset":[2390,1550]},"frontendVersion":"1.21.7","node_versions":{"ComfyUI-WanVideoWrapper":"5a2383621a05825d0d0437781afcb8552d9590fd","comfy-core":"0.3.26","ComfyUI-KJNodes":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","ComfyUI-VideoHelperSuite":"0a75c7958fe320efcb052f1d9f8451fd20c730a8"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[],"links_added_by_ue":[]},"version":0.4}
{"id":"8b7a9a57-2303-4ef5-9fc2-bf41713bd1fc","revision":0,"last_node_id":391,"last_link_id":696,"nodes":[{"id":156,"type":"GetNode","pos":[1018.0267944335938,-1210.1380615234375],"size":[210,50],"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[266]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":50,"type":"WanVideoSetBlockSwap","pos":[358.19189453125,-617.1151733398438],"size":[201.76815795898438,46],"flags":{},"order":86,"mode":0,"inputs":[{"label":"model","name":"model","type":"WANVIDEOMODEL","link":62},{"label":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":64}],"outputs":[{"label":"model","name":"model","type":"WANVIDEOMODEL","links":[63]}],"properties":{"Node name for S&R":"WanVideoSetBlockSwap","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":163,"type":"GetNode","pos":[1018.0267944335938,-1550.1380615234375],"size":[210,34],"flags":{"collapsed":true},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[280]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":143,"type":"GetNode","pos":[1018.0267944335938,-1300.1380615234375],"size":[210,60],"flags":{"collapsed":true},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"MASK","type":"MASK","links":[618]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["mask"],"color":"#1c5715","bgcolor":"#1f401b"},{"id":38,"type":"WanVideoVAELoader","pos":[-850.6472778320312,-644.9710693359375],"size":[416.25482177734375,82],"flags":{},"order":3,"mode":0,"inputs":[{"label":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS"},{"label":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"}},{"label":"precision","name":"precision","shape":7,"type":"COMBO","widget":{"name":"precision"}}],"outputs":[{"label":"vae","name":"vae","type":"WANVAE","slot_index":0,"links":[278]}],"properties":{"Node name for S&R":"WanVideoVAELoader","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":["wan_2.1_vae.safetensors","bf16"],"color":"#322","bgcolor":"#533"},{"id":28,"type":"WanVideoDecode","pos":[1961.2841796875,-1542.75537109375],"size":[280.3896179199219,198],"flags":{},"order":97,"mode":0,"inputs":[{"label":"vae","name":"vae","type":"WANVAE","link":279},{"label":"samples","name":"samples","type":"LATENT","link":33},{"label":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"}},{"label":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"}},{"label":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"}},{"label":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"}},{"label":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"}},{"label":"normalization","name":"normalization","shape":7,"type":"COMBO","widget":{"name":"normalization"}}],"outputs":[{"label":"images","name":"images","type":"IMAGE","slot_index":0,"links":[48]}],"properties":{"Node name for S&R":"WanVideoDecode","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":[false,272,272,144,128,"default"]},{"id":155,"type":"GetNode","pos":[1018.0267944335938,-1260.1380615234375],"size":[210,60],"flags":{"collapsed":true},"order":4,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[265]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":138,"type":"GetNode","pos":[1018.0267944335938,-1424.5987548828125],"size":[210,50],"flags":{"collapsed":true},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[412]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["face_images"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":247,"type":"DrawViTPose","pos":[1886.332275390625,-2482.106689453125],"size":[270,178],"flags":{},"order":82,"mode":0,"inputs":[{"label":"pose_data","name":"pose_data","type":"POSEDATA","link":477},{"label":"width","name":"width","type":"INT","widget":{"name":"width"},"link":500},{"label":"height","name":"height","type":"INT","widget":{"name":"height"},"link":501},{"label":"retarget_padding","name":"retarget_padding","type":"INT","widget":{"name":"retarget_padding"}},{"label":"body_stick_width","name":"body_stick_width","type":"INT","widget":{"name":"body_stick_width"}},{"label":"hand_stick_width","name":"hand_stick_width","type":"INT","widget":{"name":"hand_stick_width"}},{"label":"draw_head","name":"draw_head","type":"BOOLEAN","widget":{"name":"draw_head"}}],"outputs":[{"label":"pose_images","name":"pose_images","type":"IMAGE","links":[480]}],"properties":{"Node name for S&R":"DrawViTPose","widget_ue_connectable":{}},"widgets_values":[832,480,16,-1,-1,"True"]},{"id":263,"type":"GetNode","pos":[1604.442138671875,-2451.0263671875],"size":[210,60],"flags":{"collapsed":true},"order":6,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[500]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":266,"type":"GetNode","pos":[865.666748046875,-2143.949951171875],"size":[210,50],"flags":{"collapsed":true},"order":7,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[503]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":148,"type":"SetNode","pos":[578.0153198242188,-2183.224365234375],"size":[210,60],"flags":{"collapsed":true},"order":76,"mode":0,"inputs":[{"name":"AUDIO","type":"AUDIO","link":295}],"outputs":[{"label":"输出","name":"*","type":"*"}],"properties":{"previousName":"input_audio","widget_ue_connectable":{}},"widgets_values":["input_audio"]},{"id":102,"type":"DownloadAndLoadSAM2Model","pos":[632.6170043945312,-2070.95068359375],"size":[270,130],"flags":{"collapsed":true},"order":8,"mode":0,"inputs":[{"name":"model","type":"COMBO","widget":{"name":"model"}},{"name":"segmentor","type":"COMBO","widget":{"name":"segmentor"}},{"name":"device","type":"COMBO","widget":{"name":"device"}},{"name":"precision","type":"COMBO","widget":{"name":"precision"}}],"outputs":[{"label":"SAM2","name":"sam2_model","type":"SAM2MODEL","links":[454]}],"properties":{"Node name for S&R":"DownloadAndLoadSAM2Model","cnr_id":"ComfyUI-segment-anything-2","ver":"c59676b008a76237002926f684d0ca3a9b29ac54","widget_ue_connectable":{}},"widgets_values":["sam2_hiera_base_plus.safetensors","video","cuda","fp16"]},{"id":142,"type":"SetNode","pos":[2147.0966796875,-1858.836181640625],"size":[210,60],"flags":{"collapsed":false},"order":98,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":245}],"outputs":[{"name":"MASK","type":"MASK","links":[246]}],"properties":{"previousName":"mask","widget_ue_connectable":{}},"widgets_values":["mask"],"color":"#1c5715","bgcolor":"#1f401b"},{"id":108,"type":"BlockifyMask","pos":[1830.697998046875,-1848.3150634765625],"size":[270,58],"flags":{},"order":95,"mode":0,"inputs":[{"label":"masks","name":"masks","type":"MASK","link":198},{"label":"block_size","name":"block_size","type":"INT","widget":{"name":"block_size"}}],"outputs":[{"label":"mask","name":"mask","type":"MASK","links":[245]}],"properties":{"Node name for S&R":"BlockifyMask","cnr_id":"comfyui-kjnodes","ver":"00da1910634fbf314d407608efb281ae6f7f1ba2","widget_ue_connectable":{}},"widgets_values":[32]},{"id":100,"type":"GrowMask","pos":[1735.6683349609375,-2108.71630859375],"size":[270,82],"flags":{"collapsed":false},"order":90,"mode":0,"inputs":[{"label":"遮罩","name":"mask","type":"MASK","link":456},{"name":"expand","type":"INT","widget":{"name":"expand"}},{"name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"}}],"outputs":[{"label":"遮罩","name":"MASK","type":"MASK","links":[198]}],"properties":{"Node name for S&R":"GrowMask","cnr_id":"comfy-core","ver":"0.3.59","widget_ue_connectable":{}},"widgets_values":[10,true]},{"id":264,"type":"GetNode","pos":[1625.2545166015625,-2387.316650390625],"size":[210,58],"flags":{"collapsed":true},"order":9,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[501]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":48,"type":"WanVideoSetLoRAs","pos":[91.07008361816406,-641.3648681640625],"size":[174.53378295898438,46],"flags":{},"order":78,"mode":0,"inputs":[{"label":"model","name":"model","type":"WANVIDEOMODEL","link":59},{"label":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":624}],"outputs":[{"label":"model","name":"model","type":"WANVIDEOMODEL","links":[62]}],"properties":{"Node name for S&R":"WanVideoSetLoRAs","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":283,"type":"easy ifElse","pos":[1734.2900390625,-3195.138427734375],"size":[210,78.77887725830078],"flags":{"collapsed":true},"order":87,"mode":0,"inputs":[{"label":"on_true","name":"on_true","type":"*","link":527},{"label":"on_false","name":"on_false","type":"*","link":528},{"label":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":529}],"outputs":[{"label":"*","name":"*","type":"*","links":[547]}],"title":"是否是竖屏？","properties":{"Node name for S&R":"easy ifElse","widget_ue_connectable":{}},"widgets_values":[false],"color":"#232","bgcolor":"#353"},{"id":284,"type":"easy ifElse","pos":[1723.8408203125,-3102.03515625],"size":[210,78.77887725830078],"flags":{"collapsed":true},"order":88,"mode":0,"inputs":[{"label":"on_true","name":"on_true","type":"*","link":530},{"label":"on_false","name":"on_false","type":"*","link":531},{"label":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":532}],"outputs":[{"label":"*","name":"*","type":"*","links":[548]}],"title":"是否是竖屏？","properties":{"Node name for S&R":"easy ifElse","widget_ue_connectable":{}},"widgets_values":[false],"color":"#232","bgcolor":"#353"},{"id":285,"type":"INTConstant","pos":[826.2393188476562,-3007.587890625],"size":[210,58],"flags":{},"order":10,"mode":0,"inputs":[{"label":"value","name":"value","type":"INT","widget":{"name":"value"}}],"outputs":[{"label":"值","name":"value","type":"INT","links":[537]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e435e999e4b1a828a6b5f6d8f037e66f4a798324","widget_ue_connectable":{}},"widgets_values":[1280],"color":"#1b4669","bgcolor":"#29699c"},{"id":286,"type":"INTConstant","pos":[570.8340454101562,-3191.26416015625],"size":[210,58],"flags":{},"order":11,"mode":0,"inputs":[{"label":"value","name":"value","type":"INT","widget":{"name":"value"}}],"outputs":[{"label":"值","name":"value","type":"INT","links":[535]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e435e999e4b1a828a6b5f6d8f037e66f4a798324","widget_ue_connectable":{}},"widgets_values":[480],"color":"#1b4669","bgcolor":"#29699c"},{"id":287,"type":"INTConstant","pos":[566.4434204101562,-3002.249755859375],"size":[210,58],"flags":{},"order":12,"mode":0,"inputs":[{"label":"value","name":"value","type":"INT","widget":{"name":"value"}}],"outputs":[{"label":"值","name":"value","type":"INT","links":[538]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e435e999e4b1a828a6b5f6d8f037e66f4a798324","widget_ue_connectable":{}},"widgets_values":[832],"color":"#1b4669","bgcolor":"#29699c"},{"id":291,"type":"easy ifElse","pos":[1121.9669189453125,-3028.57421875],"size":[210,78.77887725830078],"flags":{"collapsed":false},"order":71,"mode":0,"inputs":[{"label":"on_true","name":"on_true","type":"*","link":537},{"label":"on_false","name":"on_false","type":"*","link":538},{"label":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":539}],"outputs":[{"label":"*","name":"*","type":"*","links":[540]}],"title":"是否是高清？","properties":{"Node name for S&R":"easy ifElse","widget_ue_connectable":{}},"widgets_values":[false],"color":"#232","bgcolor":"#353"},{"id":292,"type":"INTConstant","pos":[1420.38623046875,-3040.57568359375],"size":[210,58],"flags":{},"order":81,"mode":0,"inputs":[{"label":"value","name":"value","type":"INT","widget":{"name":"value"},"link":540}],"outputs":[{"label":"值","name":"value","type":"INT","links":[528,530]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e435e999e4b1a828a6b5f6d8f037e66f4a798324","widget_ue_connectable":{}},"widgets_values":[832],"color":"#1b4669","bgcolor":"#29699c"},{"id":296,"type":"PrimitiveBoolean","pos":[-594.3300170898438,-3342.091552734375],"size":[270,58],"flags":{},"order":13,"mode":0,"inputs":[{"label":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"}}],"outputs":[{"label":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[544]}],"properties":{"Node name for S&R":"PrimitiveBoolean","widget_ue_connectable":{}},"widgets_values":[true]},{"id":297,"type":"PrimitiveBoolean","pos":[-592.1464233398438,-3237.041748046875],"size":[270,58],"flags":{},"order":14,"mode":0,"inputs":[{"label":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"}}],"outputs":[{"label":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[545]}],"properties":{"Node name for S&R":"PrimitiveBoolean","widget_ue_connectable":{}},"widgets_values":[false]},{"id":298,"type":"PrimitiveBoolean","pos":[209.19935607910156,-3081.970458984375],"size":[270,58],"flags":{},"order":62,"mode":0,"inputs":[{"label":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"},"link":543}],"outputs":[{"label":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[536,539]}],"title":"是否要更清晰？","properties":{"Node name for S&R":"PrimitiveBoolean","widget_ue_connectable":{}},"widgets_values":[false]},{"id":299,"type":"ImpactSwitch","pos":[-145.82601928710938,-3250.71533203125],"size":[270,122],"flags":{},"order":51,"mode":0,"inputs":[{"label":"输入1","name":"input1","shape":7,"type":"*","link":544},{"name":"select","type":"INT","widget":{"name":"select"}},{"name":"sel_mode","type":"BOOLEAN","widget":{"name":"sel_mode"}},{"label":"输入2","name":"input2","type":"BOOLEAN","link":545},{"label":"输入3","name":"input3","type":"BOOLEAN"}],"outputs":[{"label":"值","name":"selected_value","type":"*","links":[546]},{"label":"标签","name":"selected_label","type":"STRING"},{"name":"selected_index","type":"INT"}],"properties":{"Node name for S&R":"ImpactSwitch","widget_ue_connectable":{}},"widgets_values":[1,false]},{"id":300,"type":"PrimitiveBoolean","pos":[190.7755584716797,-3222.50244140625],"size":[270,58],"flags":{},"order":61,"mode":0,"inputs":[{"label":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"},"link":546}],"outputs":[{"label":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[529,532]}],"title":"是否是竖屏？","properties":{"Node name for S&R":"PrimitiveBoolean","widget_ue_connectable":{}},"widgets_values":[true]},{"id":289,"type":"INTConstant","pos":[1419.07568359375,-3250.115966796875],"size":[210,58],"flags":{},"order":80,"mode":0,"inputs":[{"label":"value","name":"value","type":"INT","widget":{"name":"value"},"link":533}],"outputs":[{"label":"值","name":"value","type":"INT","links":[527,531]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e435e999e4b1a828a6b5f6d8f037e66f4a798324","widget_ue_connectable":{}},"widgets_values":[480],"color":"#1b4669","bgcolor":"#29699c"},{"id":154,"type":"SetNode","pos":[2003.0228271484375,-3146.64306640625],"size":[210,60],"flags":{"collapsed":false},"order":94,"mode":0,"inputs":[{"label":"输入","name":"*","type":"*","link":548}],"outputs":[{"label":"输出","name":"*","type":"*"}],"properties":{"previousName":"height","widget_ue_connectable":{}},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":303,"type":"GetNode","pos":[-1651.791748046875,-1518.1419677734375],"size":[210,58],"flags":{"collapsed":true},"order":15,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[551]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":304,"type":"GetNode","pos":[-1659.8587646484375,-1450.9920654296875],"size":[210,58],"flags":{"collapsed":true},"order":16,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[552]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":294,"type":"PrimitiveBoolean","pos":[-571.2533569335938,-3117.812255859375],"size":[270,58],"flags":{},"order":17,"mode":0,"inputs":[{"label":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"}}],"outputs":[{"label":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[541]}],"properties":{"Node name for S&R":"PrimitiveBoolean","widget_ue_connectable":{}},"widgets_values":[true]},{"id":295,"type":"PrimitiveBoolean","pos":[-574.0233764648438,-2982.136962890625],"size":[270,58],"flags":{},"order":18,"mode":0,"inputs":[{"label":"value","name":"value","type":"BOOLEAN","widget":{"name":"value"}}],"outputs":[{"label":"BOOLEAN","name":"BOOLEAN","type":"BOOLEAN","links":[542]}],"properties":{"Node name for S&R":"PrimitiveBoolean","widget_ue_connectable":{}},"widgets_values":[false]},{"id":179,"type":"SetNode","pos":[-355.28564453125,-2035.3056640625],"size":[210,58],"flags":{"collapsed":false},"order":72,"mode":0,"inputs":[{"name":"INT","type":"INT","link":557}],"outputs":[{"label":"输出","name":"*","type":"*"}],"properties":{"previousName":"frames","widget_ue_connectable":{}},"widgets_values":["frames"],"color":"#1b4669","bgcolor":"#29699c"},{"id":153,"type":"SetNode","pos":[1984.8514404296875,-3292.23291015625],"size":[210,60],"flags":{"collapsed":false},"order":93,"mode":0,"inputs":[{"label":"输入","name":"*","type":"*","link":547}],"outputs":[{"label":"输出","name":"*","type":"*"}],"properties":{"previousName":"width","widget_ue_connectable":{}},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":302,"type":"GetNode","pos":[-342.8004150390625,-2304.481201171875],"size":[210,58],"flags":{"collapsed":false},"order":19,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[574]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":158,"type":"GetNode","pos":[1023.8883666992188,-1155.241455078125],"size":[210,60],"flags":{"collapsed":true},"order":20,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[268]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["frame_count"],"color":"#1b4669","bgcolor":"#29699c"},{"id":157,"type":"SetNode","pos":[567.4564208984375,-2283.4462890625],"size":[210,60],"flags":{"collapsed":true},"order":75,"mode":0,"inputs":[{"name":"INT","type":"INT","link":294}],"outputs":[{"label":"输出","name":"*","type":"*","links":[]}],"properties":{"previousName":"frame_count","widget_ue_connectable":{}},"widgets_values":["frame_count"],"color":"#1b4669","bgcolor":"#29699c"},{"id":161,"type":"SetNode","pos":[-552.4668579101562,-487.6340026855469],"size":[210,60],"flags":{"collapsed":false},"order":50,"mode":0,"inputs":[{"name":"WANVAE","type":"WANVAE","link":278}],"outputs":[{"label":"输出","name":"*","type":"*"}],"properties":{"previousName":"VAE","widget_ue_connectable":{}},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":141,"type":"GetNode","pos":[995.3759765625,-1461.7900390625],"size":[210,50],"flags":{"collapsed":true},"order":21,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[483]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["pose_images"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":99,"type":"DrawMaskOnImage","pos":[2139.379150390625,-2026.2840576171875],"size":[270,78],"flags":{},"order":101,"mode":0,"inputs":[{"label":"image","name":"image","type":"IMAGE","link":592},{"label":"mask","name":"mask","type":"MASK","link":246},{"label":"color","name":"color","type":"STRING","widget":{"name":"color"}}],"outputs":[{"label":"images","name":"images","type":"IMAGE","links":[598]}],"properties":{"Node name for S&R":"DrawMaskOnImage","cnr_id":"comfyui-kjnodes","ver":"623b5913dc7f240fd8b26422e99f8849a21c5473","widget_ue_connectable":{}},"widgets_values":["0, 0, 0"]},{"id":146,"type":"GetNode","pos":[1362.472412109375,-1820.8206787109375],"size":[210,60],"flags":{"collapsed":false},"order":22,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[592]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["input_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":330,"type":"CM_FloatToInt","pos":[-509.7694091796875,-2486.585205078125],"size":[270,58],"flags":{},"order":54,"mode":0,"inputs":[{"label":"A","name":"a","type":"FLOAT","widget":{"name":"a"},"link":603}],"outputs":[{"label":"整数","name":"INT","type":"INT","links":[600]}],"properties":{"Node name for S&R":"CM_FloatToInt","widget_ue_connectable":{}},"widgets_values":[0]},{"id":329,"type":"PrimitiveFloat","pos":[-1407.3050537109375,-2185.04638671875],"size":[270,58],"flags":{},"order":23,"mode":0,"inputs":[{"label":"value","name":"value","type":"FLOAT","widget":{"name":"value"}}],"outputs":[{"label":"FLOAT","name":"FLOAT","type":"FLOAT","links":[601]}],"properties":{"Node name for S&R":"PrimitiveFloat","widget_ue_connectable":{}},"widgets_values":[16]},{"id":331,"type":"SetNode","pos":[-1038.2642822265625,-2191.14111328125],"size":[210,60],"flags":{},"order":53,"mode":0,"inputs":[{"label":"输入","name":"FLOAT","type":"FLOAT","link":601}],"outputs":[{"label":"输出","name":"FLOAT","type":"FLOAT","links":[602]}],"properties":{"previousName":"fps","widget_ue_connectable":{}},"widgets_values":["fps"],"color":"#232","bgcolor":"#353"},{"id":309,"type":"GetNode","pos":[-781.3919677734375,-2524.4140625],"size":[210,58],"flags":{"collapsed":false},"order":24,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[603]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["fps"],"color":"#232","bgcolor":"#353"},{"id":305,"type":"SimpleMath+","pos":[-729.5095825195312,-2204.32568359375],"size":[270,98],"flags":{"collapsed":false},"order":63,"mode":0,"inputs":[{"name":"a","shape":7,"type":"*","link":556},{"name":"b","shape":7,"type":"*","link":602},{"name":"c","shape":7,"type":"*"},{"name":"value","type":"STRING","widget":{"name":"value"}}],"outputs":[{"label":"整数","name":"INT","type":"INT","links":[557]},{"label":"浮点","name":"FLOAT","type":"FLOAT"}],"properties":{"Node name for S&R":"SimpleMath+","widget_ue_connectable":{}},"widgets_values":["a*b+1"]},{"id":243,"type":"Sam2Segmentation","pos":[1432.5794677734375,-2269.507568359375],"size":[258.91265869140625,182],"flags":{},"order":84,"mode":0,"inputs":[{"label":"SAM2","name":"sam2_model","type":"SAM2MODEL","link":454},{"label":"图像","name":"image","type":"IMAGE","link":493},{"label":"正面坐标","name":"coordinates_positive","shape":7,"type":"STRING","link":476},{"label":"负面坐标","name":"coordinates_negative","shape":7,"type":"STRING"},{"label":"BBox","name":"bboxes","shape":7,"type":"BBOX"},{"label":"遮罩","name":"mask","shape":7,"type":"MASK"},{"name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"}},{"name":"individual_objects","shape":7,"type":"BOOLEAN","widget":{"name":"individual_objects"}}],"outputs":[{"label":"遮罩","name":"mask","type":"MASK","links":[456]}],"properties":{"Node name for S&R":"Sam2Segmentation","widget_ue_connectable":{}},"widgets_values":[true,false]},{"id":246,"type":"PoseAndFaceDetection","pos":[1078.76025390625,-2380.45556640625],"size":[262.46484375,166],"flags":{},"order":73,"mode":0,"inputs":[{"label":"model","name":"model","type":"POSEMODEL","link":468},{"label":"images","name":"images","type":"IMAGE","link":469},{"label":"retarget_image","name":"retarget_image","shape":7,"type":"IMAGE"},{"label":"width","name":"width","type":"INT","widget":{"name":"width"},"link":502},{"label":"height","name":"height","type":"INT","widget":{"name":"height"},"link":503}],"outputs":[{"label":"pose_data","name":"pose_data","type":"POSEDATA","links":[477]},{"label":"face_images","name":"face_images","type":"IMAGE","links":[597]},{"label":"key_frame_body_points","name":"key_frame_body_points","type":"STRING","links":[476]},{"label":"bboxes","name":"bboxes","type":"BBOX"}],"properties":{"Node name for S&R":"PoseAndFaceDetection","widget_ue_connectable":{}},"widgets_values":[832,480]},{"id":70,"type":"WanVideoClipVisionEncode","pos":[696.4796752929688,-1452.4136962890625],"size":[280.9771423339844,262],"flags":{},"order":57,"mode":0,"inputs":[{"label":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":97},{"label":"image_1","name":"image_1","type":"IMAGE","link":235},{"label":"image_2","name":"image_2","shape":7,"type":"IMAGE"},{"label":"negative_image","name":"negative_image","shape":7,"type":"IMAGE"},{"label":"strength_1","name":"strength_1","type":"FLOAT","widget":{"name":"strength_1"}},{"label":"strength_2","name":"strength_2","type":"FLOAT","widget":{"name":"strength_2"}},{"label":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"}},{"label":"combine_embeds","name":"combine_embeds","type":"COMBO","widget":{"name":"combine_embeds"}},{"label":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"}},{"label":"tiles","name":"tiles","shape":7,"type":"INT","widget":{"name":"tiles"}},{"label":"ratio","name":"ratio","shape":7,"type":"FLOAT","widget":{"name":"ratio"}}],"outputs":[{"label":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","links":[387]}],"properties":{"Node name for S&R":"WanVideoClipVisionEncode","cnr_id":"ComfyUI-WanVideoWrapper","ver":"2bdd81a10b03c14443c79bdf3b783b1feb3d1fa3","widget_ue_connectable":{}},"widgets_values":[1,1,"center","average",true,0,0.5],"color":"#233","bgcolor":"#355"},{"id":133,"type":"GetNode","pos":[454.3372497558594,-1599.6298828125],"size":[210,50],"flags":{"collapsed":true},"order":25,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[235,282]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["reference_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":265,"type":"GetNode","pos":[844.8543090820312,-2207.65966796875],"size":[210,50],"flags":{"collapsed":true},"order":26,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[502]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["width"],"color":"#1b4669","bgcolor":"#29699c"},{"id":224,"type":"OnnxDetectionModelLoader","pos":[773.3843994140625,-2424.91650390625],"size":[292.8853454589844,106],"flags":{"collapsed":true},"order":27,"mode":0,"inputs":[{"label":"vitpose_model","name":"vitpose_model","type":"COMBO","widget":{"name":"vitpose_model"}},{"label":"yolo_model","name":"yolo_model","type":"COMBO","widget":{"name":"yolo_model"}},{"label":"onnx_device","name":"onnx_device","type":"COMBO","widget":{"name":"onnx_device"}}],"outputs":[{"label":"model","name":"model","type":"POSEMODEL","links":[468]}],"properties":{"Node name for S&R":"OnnxDetectionModelLoader","ver":"e45daff12a038bbe256763b358b7f6dab5026136","widget_ue_connectable":{},"aux_id":"kijai/ComfyUI-WanAnimatePreprocess"},"widgets_values":["vitpose-l-wholebody.onnx","yolov10m.onnx","CUDAExecutionProvider"]},{"id":131,"type":"GetNode","pos":[1011.8758544921875,-1369.2952880859375],"size":[210,60],"flags":{"collapsed":true},"order":28,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[617]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["background_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":308,"type":"INTConstant","pos":[-1112.3287353515625,-2330.193603515625],"size":[210,58],"flags":{},"order":29,"mode":0,"inputs":[{"name":"value","type":"INT","widget":{"name":"value"}}],"outputs":[{"label":"值","name":"value","type":"INT","links":[556]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e81f33508b0821ea2f53f4f46a833fa6215626bd","widget_ue_connectable":{}},"widgets_values":[10],"color":"#1b4669","bgcolor":"#29699c"},{"id":62,"type":"WanVideoAnimateEmbeds","pos":[1243.5621337890625,-1537.8021240234375],"size":[274.2164001464844,370],"flags":{},"order":66,"mode":0,"inputs":[{"label":"vae","name":"vae","type":"WANVAE","link":280},{"label":"clip_embeds","name":"clip_embeds","shape":7,"type":"WANVIDIMAGE_CLIPEMBEDS","link":387},{"label":"ref_images","name":"ref_images","shape":7,"type":"IMAGE","link":282},{"label":"pose_images","name":"pose_images","shape":7,"type":"IMAGE","link":483},{"label":"face_images","name":"face_images","shape":7,"type":"IMAGE","link":412},{"label":"bg_images","name":"bg_images","shape":7,"type":"IMAGE","link":617},{"label":"mask","name":"mask","shape":7,"type":"MASK","link":618},{"label":"width","name":"width","type":"INT","widget":{"name":"width"},"link":265},{"label":"height","name":"height","type":"INT","widget":{"name":"height"},"link":266},{"label":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":268},{"label":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"}},{"label":"frame_window_size","name":"frame_window_size","type":"INT","widget":{"name":"frame_window_size"}},{"label":"colormatch","name":"colormatch","type":"COMBO","widget":{"name":"colormatch"}},{"label":"pose_strength","name":"pose_strength","type":"FLOAT","widget":{"name":"pose_strength"}},{"label":"face_strength","name":"face_strength","type":"FLOAT","widget":{"name":"face_strength"}},{"label":"tiled_vae","name":"tiled_vae","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_vae"}}],"outputs":[{"label":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","links":[84]}],"properties":{"Node name for S&R":"WanVideoAnimateEmbeds","cnr_id":"ComfyUI-WanVideoWrapper","ver":"761b1d191e50d589465e31dc0d40ff7c59b1b7b0","widget_ue_connectable":{"width":true,"num_frames":true,"height":true}},"widgets_values":[832,480,501,true,97,"disabled",1,1,false],"color":"#322","bgcolor":"#533"},{"id":288,"type":"INTConstant","pos":[794.7545776367188,-3189.702880859375],"size":[210,58],"flags":{},"order":30,"mode":0,"inputs":[{"label":"value","name":"value","type":"INT","widget":{"name":"value"}}],"outputs":[{"label":"值","name":"value","type":"INT","links":[534]}],"properties":{"Node name for S&R":"INTConstant","cnr_id":"comfyui-kjnodes","ver":"e435e999e4b1a828a6b5f6d8f037e66f4a798324","widget_ue_connectable":{}},"widgets_values":[720],"color":"#1b4669","bgcolor":"#29699c"},{"id":293,"type":"ImpactSwitch","pos":[-117.74549102783203,-3069.67578125],"size":[270,122],"flags":{},"order":52,"mode":0,"inputs":[{"label":"输入1","name":"input1","shape":7,"type":"*","link":541},{"name":"select","type":"INT","widget":{"name":"select"}},{"name":"sel_mode","type":"BOOLEAN","widget":{"name":"sel_mode"}},{"label":"输入2","name":"input2","type":"BOOLEAN","link":542},{"label":"输入3","name":"input3","type":"BOOLEAN"}],"outputs":[{"label":"值","name":"selected_value","type":"*","links":[543]},{"label":"标签","name":"selected_label","type":"STRING"},{"name":"selected_index","type":"INT"}],"properties":{"Node name for S&R":"ImpactSwitch","widget_ue_connectable":{}},"widgets_values":[1,false]},{"id":51,"type":"WanVideoBlockSwap","pos":[51.69818115234375,-515.9623413085938],"size":[281.404296875,202],"flags":{},"order":31,"mode":0,"inputs":[{"label":"blocks_to_swap","name":"blocks_to_swap","type":"INT","widget":{"name":"blocks_to_swap"}},{"label":"offload_img_emb","name":"offload_img_emb","type":"BOOLEAN","widget":{"name":"offload_img_emb"}},{"label":"offload_txt_emb","name":"offload_txt_emb","type":"BOOLEAN","widget":{"name":"offload_txt_emb"}},{"label":"use_non_blocking","name":"use_non_blocking","shape":7,"type":"BOOLEAN","widget":{"name":"use_non_blocking"}},{"label":"vace_blocks_to_swap","name":"vace_blocks_to_swap","shape":7,"type":"INT","widget":{"name":"vace_blocks_to_swap"}},{"label":"prefetch_blocks","name":"prefetch_blocks","shape":7,"type":"INT","widget":{"name":"prefetch_blocks"}},{"label":"block_swap_debug","name":"block_swap_debug","shape":7,"type":"BOOLEAN","widget":{"name":"block_swap_debug"}}],"outputs":[{"label":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","links":[64]}],"properties":{"Node name for S&R":"WanVideoBlockSwap","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":[40,false,false,true,0,1,false],"color":"#223","bgcolor":"#335"},{"id":342,"type":"WanVideoLoraSelectMulti","pos":[206.50711059570312,-1144.4217529296875],"size":[415.9399719238281,342],"flags":{},"order":67,"mode":0,"inputs":[{"label":"prev_lora","name":"prev_lora","shape":7,"type":"WANVIDLORA","link":619},{"label":"blocks","name":"blocks","shape":7,"type":"SELECTEDBLOCKS"},{"label":"lora_0","name":"lora_0","type":"COMBO","widget":{"name":"lora_0"}},{"label":"strength_0","name":"strength_0","type":"FLOAT","widget":{"name":"strength_0"}},{"label":"lora_1","name":"lora_1","type":"COMBO","widget":{"name":"lora_1"}},{"label":"strength_1","name":"strength_1","type":"FLOAT","widget":{"name":"strength_1"}},{"label":"lora_2","name":"lora_2","type":"COMBO","widget":{"name":"lora_2"}},{"label":"strength_2","name":"strength_2","type":"FLOAT","widget":{"name":"strength_2"}},{"label":"lora_3","name":"lora_3","type":"COMBO","widget":{"name":"lora_3"}},{"label":"strength_3","name":"strength_3","type":"FLOAT","widget":{"name":"strength_3"}},{"label":"lora_4","name":"lora_4","type":"COMBO","widget":{"name":"lora_4"}},{"label":"strength_4","name":"strength_4","type":"FLOAT","widget":{"name":"strength_4"}},{"label":"low_mem_load","name":"low_mem_load","shape":7,"type":"BOOLEAN","widget":{"name":"low_mem_load"}},{"label":"merge_loras","name":"merge_loras","shape":7,"type":"BOOLEAN","widget":{"name":"merge_loras"}}],"outputs":[{"label":"lora","name":"lora","type":"WANVIDLORA","links":[624]}],"properties":{"Node name for S&R":"WanVideoLoraSelectMulti","cnr_id":"ComfyUI-WanVideoWrapper","ver":"b2c8cf969fcf60a38884ea2c29af177ae1f28b29","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.1"},"widget_ue_connectable":{"strength_0":true,"strength_1":true,"strength_4":true,"strength_2":true,"strength_3":true,"lora_1":true,"lora_2":true,"lora_3":true,"lora_4":true,"low_mem_load":true,"merge_loras":true,"lora_0":true}},"widgets_values":["lightx2v_elite_it2v_animate_face.safetensors",1.1000000000000003,"WAN22_MoCap_fullbodyCOPY_ED.safetensors",0.3500000000000001,"Wan2.2-Fun-A14B-InP-Fusion-Elite.safetensors",0.5000000000000001,"FullDynamic_Ultimate_Fusion_Elite.safetensors",0.7000000000000002,"none",0,false,false],"color":"#223","bgcolor":"#335"},{"id":22,"type":"WanVideoModelLoader","pos":[-1124.4312744140625,-1071.7008056640625],"size":[601.9249267578125,318],"flags":{},"order":55,"mode":0,"inputs":[{"label":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":100},{"label":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS"},{"label":"lora","name":"lora","shape":7,"type":"WANVIDLORA"},{"label":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS"},{"label":"extra_model","name":"extra_model","shape":7,"type":"VACEPATH"},{"label":"fantasytalking_model","name":"fantasytalking_model","shape":7,"type":"FANTASYTALKINGMODEL"},{"label":"multitalk_model","name":"multitalk_model","shape":7,"type":"MULTITALKMODEL"},{"label":"fantasyportrait_model","name":"fantasyportrait_model","shape":7,"type":"FANTASYPORTRAITMODEL"},{"label":"model","name":"model","type":"COMBO","widget":{"name":"model"}},{"label":"base_precision","name":"base_precision","type":"COMBO","widget":{"name":"base_precision"}},{"label":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"}},{"label":"load_device","name":"load_device","type":"COMBO","widget":{"name":"load_device"}},{"label":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"}},{"label":"rms_norm_function","name":"rms_norm_function","shape":7,"type":"COMBO","widget":{"name":"rms_norm_function"}}],"outputs":[{"label":"model","name":"model","type":"WANVIDEOMODEL","slot_index":0,"links":[59]}],"properties":{"Node name for S&R":"WanVideoModelLoader","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":["Wan22Animate/wan2.2_animate_14B_bf16.safetensors","fp16_fast","fp8_e4m3fn","offload_device","sageattn","default"],"color":"#223","bgcolor":"#335"},{"id":128,"type":"SetNode","pos":[-832.8844604492188,-1587.27978515625],"size":[210,60],"flags":{"collapsed":false},"order":110,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":616}],"outputs":[{"label":"输出","name":"*","type":"*"}],"properties":{"previousName":"reference_image","widget_ue_connectable":{}},"widgets_values":["reference_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":343,"type":"WanVideoLoraSelectMulti","pos":[-285.370849609375,-1129.989013671875],"size":[458.589111328125,342],"flags":{},"order":58,"mode":0,"inputs":[{"label":"prev_lora","name":"prev_lora","shape":7,"type":"WANVIDLORA","link":629},{"label":"blocks","name":"blocks","shape":7,"type":"SELECTEDBLOCKS"},{"label":"lora_0","name":"lora_0","type":"COMBO","widget":{"name":"lora_0"}},{"label":"strength_0","name":"strength_0","type":"FLOAT","widget":{"name":"strength_0"}},{"label":"lora_1","name":"lora_1","type":"COMBO","widget":{"name":"lora_1"}},{"label":"strength_1","name":"strength_1","type":"FLOAT","widget":{"name":"strength_1"}},{"label":"lora_2","name":"lora_2","type":"COMBO","widget":{"name":"lora_2"}},{"label":"strength_2","name":"strength_2","type":"FLOAT","widget":{"name":"strength_2"}},{"label":"lora_3","name":"lora_3","type":"COMBO","widget":{"name":"lora_3"}},{"label":"strength_3","name":"strength_3","type":"FLOAT","widget":{"name":"strength_3"}},{"label":"lora_4","name":"lora_4","type":"COMBO","widget":{"name":"lora_4"}},{"label":"strength_4","name":"strength_4","type":"FLOAT","widget":{"name":"strength_4"}},{"label":"low_mem_load","name":"low_mem_load","shape":7,"type":"BOOLEAN","widget":{"name":"low_mem_load"}},{"label":"merge_loras","name":"merge_loras","shape":7,"type":"BOOLEAN","widget":{"name":"merge_loras"}}],"outputs":[{"label":"lora","name":"lora","type":"WANVIDLORA","links":[619]}],"properties":{"Node name for S&R":"WanVideoLoraSelectMulti","cnr_id":"ComfyUI-WanVideoWrapper","ver":"b2c8cf969fcf60a38884ea2c29af177ae1f28b29","ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.1"},"widget_ue_connectable":{"strength_0":true,"strength_1":true,"strength_4":true,"strength_2":true,"strength_3":true,"lora_1":true,"lora_2":true,"lora_3":true,"lora_4":true,"low_mem_load":true,"merge_loras":true,"lora_0":true}},"widgets_values":["WanAnimate_relight_lora_fp16.safetensors",1,"none",0.8000000000000002,"FastWan_T2V_14B_480p_lora_rank_128_bf16.safetensors",0.8000000000000002,"Wan21_PusaV1_LoRA_14B_rank512_bf16.safetensors",0.8000000000000002,"none",0.5,false,false],"color":"#223","bgcolor":"#335"},{"id":35,"type":"WanVideoTorchCompileSettings","pos":[-1557.6051025390625,-1070.5693359375],"size":[390.5999755859375,202],"flags":{},"order":32,"mode":0,"inputs":[{"label":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"}},{"label":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"}},{"label":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"}},{"label":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"}},{"label":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","type":"INT","widget":{"name":"dynamo_cache_size_limit"}},{"label":"compile_transformer_blocks_only","name":"compile_transformer_blocks_only","type":"BOOLEAN","widget":{"name":"compile_transformer_blocks_only"}},{"label":"dynamo_recompile_limit","name":"dynamo_recompile_limit","shape":7,"type":"INT","widget":{"name":"dynamo_recompile_limit"}}],"outputs":[{"label":"torch_compile_args","name":"torch_compile_args","type":"WANCOMPILEARGS","slot_index":0,"links":[100]}],"properties":{"Node name for S&R":"WanVideoTorchCompileSettings","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":["inductor",false,"default",false,64,true,128],"color":"#223","bgcolor":"#335"},{"id":290,"type":"easy ifElse","pos":[1109.541748046875,-3171.365966796875],"size":[210,78.77887725830078],"flags":{"collapsed":false},"order":70,"mode":0,"inputs":[{"label":"on_true","name":"on_true","type":"*","link":534},{"label":"on_false","name":"on_false","type":"*","link":535},{"label":"boolean","name":"boolean","type":"BOOLEAN","widget":{"name":"boolean"},"link":536}],"outputs":[{"label":"*","name":"*","type":"*","links":[533]}],"title":"是否是高清？","properties":{"Node name for S&R":"easy ifElse","widget_ue_connectable":{}},"widgets_values":[false],"color":"#232","bgcolor":"#353"},{"id":340,"type":"AnimalPosePreprocessor","pos":[1084.9498291015625,-2689.68212890625],"size":[400.5525817871094,126],"flags":{},"order":33,"mode":4,"inputs":[{"label":"图像","name":"image","type":"IMAGE"},{"name":"bbox_detector","shape":7,"type":"COMBO","widget":{"name":"bbox_detector"}},{"name":"pose_estimator","shape":7,"type":"COMBO","widget":{"name":"pose_estimator"}},{"name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"}}],"outputs":[{"label":"图像","name":"IMAGE","type":"IMAGE"},{"label":"姿态关键点","name":"POSE_KEYPOINT","type":"POSE_KEYPOINT"}],"properties":{"Node name for S&R":"AnimalPosePreprocessor","widget_ue_connectable":{}},"widgets_values":["yolox_l.torchscript.pt","rtmpose-m_ap10k_256.onnx",512]},{"id":341,"type":"GetNode","pos":[1611.4964599609375,-2684.63232421875],"size":[210,58],"flags":{"collapsed":false},"order":34,"mode":4,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["reference_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":347,"type":"ModelPatchTorchSettings","pos":[-4346.81005859375,-1947],"size":[307.443359375,58.83769226074219],"flags":{"collapsed":false},"order":85,"mode":0,"inputs":[{"label":"model","name":"model","type":"MODEL","link":630},{"label":"enable_fp16_accumulation","name":"enable_fp16_accumulation","type":"BOOLEAN","widget":{"name":"enable_fp16_accumulation"}}],"outputs":[{"label":"MODEL","name":"MODEL","type":"MODEL","links":[631]}],"properties":{"Node name for S&R":"ModelPatchTorchSettings","widget_ue_connectable":{}},"widgets_values":[false],"color":"#223","bgcolor":"#335"},{"id":348,"type":"ModelSamplingAuraFlow","pos":[-3903.470458984375,-1901.40576171875],"size":[290,60],"flags":{"collapsed":false},"order":91,"mode":0,"inputs":[{"label":"模型","name":"model","type":"MODEL","link":631},{"name":"shift","type":"FLOAT","widget":{"name":"shift"}}],"outputs":[{"label":"模型","name":"MODEL","type":"MODEL","links":[658]}],"properties":{"Node name for S&R":"ModelSamplingAuraFlow","cnr_id":"comfy-core","hasSecondTab":false,"ver":"0.3.48","widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"tabXOffset":10},"widgets_values":[3]},{"id":363,"type":"UNETLoader","pos":[-6290.2548828125,-1978.28955078125],"size":[396.9832763671875,107.13525390625],"flags":{},"order":35,"mode":0,"inputs":[{"name":"unet_name","type":"COMBO","widget":{"name":"unet_name"}},{"name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"}}],"outputs":[{"label":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[652]}],"properties":{"Node name for S&R":"UNETLoader","cnr_id":"comfy-core","hasSecondTab":false,"models":[{"name":"qwen_image_edit_fp8_e4m3fn.safetensors","directory":"diffusion_models","url":"https://huggingface.co/Comfy-Org/Qwen-Image-Edit_ComfyUI/resolve/main/split_files/diffusion_models/qwen_image_edit_fp8_e4m3fn.safetensors"}],"ver":"0.3.48","widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"tabXOffset":10},"widgets_values":["Qwen-Image-Edit-2509_fp8_e4m3fn.safetensors","default"]},{"id":369,"type":"VAELoader","pos":[-4537.6845703125,-1595.616943359375],"size":[330,60],"flags":{},"order":36,"mode":0,"inputs":[{"name":"vae_name","type":"COMBO","widget":{"name":"vae_name"}}],"outputs":[{"name":"VAE","type":"VAE","slot_index":0,"links":[633,635,665]}],"properties":{"Node name for S&R":"VAELoader","cnr_id":"comfy-core","hasSecondTab":false,"models":[{"name":"qwen_image_vae.safetensors","directory":"vae","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/vae/qwen_image_vae.safetensors"}],"ver":"0.3.48","widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"tabXOffset":10},"widgets_values":["qwen_image_vae.safetensors"]},{"id":301,"type":"GetNode","pos":[-364.8603515625,-2191.3203125],"size":[210,58],"flags":{"collapsed":false},"order":37,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"*","type":"*","links":[575]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["height"],"color":"#1b4669","bgcolor":"#29699c"},{"id":144,"type":"SetNode","pos":[569.5488891601562,-2345.717529296875],"size":[210,60],"flags":{"collapsed":true},"order":74,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":492}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[493]}],"properties":{"previousName":"input_video","widget_ue_connectable":{}},"widgets_values":["input_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":187,"type":"GIMMVFI_interpolate","pos":[4248.97705078125,-386.1463928222656],"size":[270,174],"flags":{},"order":103,"mode":4,"inputs":[{"label":"gimmvfi_model","name":"gimmvfi_model","type":"GIMMVIF_MODEL","link":303},{"label":"images","name":"images","type":"IMAGE","link":423},{"label":"ds_factor","name":"ds_factor","type":"FLOAT","widget":{"name":"ds_factor"}},{"label":"interpolation_factor","name":"interpolation_factor","type":"INT","widget":{"name":"interpolation_factor"}},{"label":"seed","name":"seed","type":"INT","widget":{"name":"seed"}}],"outputs":[{"label":"images","name":"images","type":"IMAGE","links":[]},{"label":"flow_tensors","name":"flow_tensors","type":"IMAGE"}],"properties":{"Node name for S&R":"GIMMVFI_interpolate","cnr_id":"ComfyUI-GIMM-VFI","ver":"4c9a3123762af85e7c796e41737da0b70c75d72d","widget_ue_connectable":{}},"widgets_values":[1,2,777,"fixed"]},{"id":233,"type":"SetNode","pos":[1744.9505615234375,-2278.7177734375],"size":[210,58],"flags":{"collapsed":false},"order":83,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":597}],"outputs":[{"label":"输出","name":"*","type":"*","links":[]}],"properties":{"previousName":"face_images","widget_ue_connectable":{}},"widgets_values":["face_images"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":130,"type":"SetNode","pos":[2132.82861328125,-2162.585205078125],"size":[211.05747985839844,60],"flags":{"collapsed":false},"order":105,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":598}],"outputs":[{"label":"输出","name":"*","type":"*","links":[]}],"properties":{"previousName":"background_image","widget_ue_connectable":{}},"widgets_values":["background_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":248,"type":"SetNode","pos":[2237.012451171875,-2387.9013671875],"size":[210,58],"flags":{"collapsed":false},"order":89,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":480}],"outputs":[{"label":"输出","name":"*","type":"*","links":[]}],"properties":{"previousName":"pose_images","widget_ue_connectable":{}},"widgets_values":["pose_images"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":71,"type":"CLIPVisionLoader","pos":[263.67657470703125,-1408.1898193359375],"size":[270,58],"flags":{},"order":38,"mode":0,"inputs":[{"name":"clip_name","type":"COMBO","widget":{"name":"clip_name"}}],"outputs":[{"label":"CLIP视觉","name":"CLIP_VISION","type":"CLIP_VISION","links":[97]}],"properties":{"Node name for S&R":"CLIPVisionLoader","cnr_id":"comfy-core","ver":"0.3.59","widget_ue_connectable":{}},"widgets_values":["clip_vision_vit_h.safetensors"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":65,"type":"WanVideoTextEncodeCached","pos":[984.358642578125,-1088.5185546875],"size":[488.4488220214844,362.56817626953125],"flags":{},"order":39,"mode":0,"inputs":[{"label":"extender_args","name":"extender_args","shape":7,"type":"WANVIDEOPROMPTEXTENDER_ARGS"},{"label":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"}},{"label":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"}},{"label":"positive_prompt","name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"}},{"label":"negative_prompt","name":"negative_prompt","type":"STRING","widget":{"name":"negative_prompt"}},{"label":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"}},{"label":"use_disk_cache","name":"use_disk_cache","type":"BOOLEAN","widget":{"name":"use_disk_cache"}},{"label":"device","name":"device","type":"COMBO","widget":{"name":"device"}}],"outputs":[{"label":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":[281]},{"label":"negative_text_embeds","name":"negative_text_embeds","type":"WANVIDEOTEXTEMBEDS"},{"label":"positive_prompt","name":"positive_prompt","type":"STRING"}],"properties":{"Node name for S&R":"WanVideoTextEncodeCached","cnr_id":"ComfyUI-WanVideoWrapper","ver":"761b1d191e50d589465e31dc0d40ff7c59b1b7b0","widget_ue_connectable":{}},"widgets_values":["umt5-xxl-enc-bf16.safetensors","bf16","一个高质量的裸体美女视频，弹跳，抖动，36d大胸，完美的乳头，完美的胸脯，柔软的胸脯","色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","disabled",false,"gpu"],"color":"#432","bgcolor":"#653"},{"id":339,"type":"easy imageRemBg","pos":[-1160.6268310546875,-1600.7276611328125],"size":[270,126],"flags":{},"order":109,"mode":0,"inputs":[{"label":"图像","name":"images","type":"IMAGE","link":615},{"name":"rem_mode","type":"COMBO","widget":{"name":"rem_mode"}},{"name":"image_output","type":"COMBO","widget":{"name":"image_output"}},{"name":"save_prefix","type":"STRING","widget":{"name":"save_prefix"}},{"name":"torchscript_jit","shape":7,"type":"BOOLEAN","widget":{"name":"torchscript_jit"}},{"name":"add_background","shape":7,"type":"COMBO","widget":{"name":"add_background"}},{"name":"refine_foreground","shape":7,"type":"BOOLEAN","widget":{"name":"refine_foreground"}}],"outputs":[{"label":"图像","name":"image","type":"IMAGE","links":[616]},{"label":"遮罩","name":"mask","type":"MASK"}],"properties":{"Node name for S&R":"easy imageRemBg","widget_ue_connectable":{}},"widgets_values":["RMBG-2.0","Hide","ComfyUI",false,"none",false]},{"id":64,"type":"ImageResizeKJv2","pos":[-1478.289794921875,-1575.0341796875],"size":[270,336],"flags":{},"order":108,"mode":0,"inputs":[{"label":"image","name":"image","type":"IMAGE","link":682},{"label":"mask","name":"mask","shape":7,"type":"MASK"},{"label":"width","name":"width","type":"INT","widget":{"name":"width"},"link":551},{"label":"height","name":"height","type":"INT","widget":{"name":"height"},"link":552},{"label":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"}},{"label":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"}},{"label":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"}},{"label":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"}},{"label":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"}},{"label":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"}}],"outputs":[{"label":"IMAGE","name":"IMAGE","type":"IMAGE","links":[615]},{"label":"width","name":"width","type":"INT","links":[]},{"label":"height","name":"height","type":"INT","links":[]},{"label":"mask","name":"mask","type":"MASK"}],"properties":{"Node name for S&R":"ImageResizeKJv2","cnr_id":"comfyui-kjnodes","ver":"468fcc86f0b29e79a8510e8239eb15714d6747a6","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[832,480,"lanczos","crop","0, 0, 0","top",16,"cpu"]},{"id":370,"type":"CFGNorm","pos":[-3429.183837890625,-1944.89599609375],"size":[290,60],"flags":{"collapsed":false},"order":96,"mode":0,"inputs":[{"label":"model","name":"model","type":"MODEL","link":658},{"label":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"}}],"outputs":[{"label":"patched_model","name":"patched_model","type":"MODEL","links":[660]}],"properties":{"Node name for S&R":"CFGNorm","cnr_id":"comfy-core","hasSecondTab":false,"ver":"0.3.50","ue_properties":{"widget_ue_connectable":{"strength":true}},"widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"tabXOffset":10},"widgets_values":[1]},{"id":346,"type":"WanVideoLoraSelect","pos":[-790.9061889648438,-1345.697021484375],"size":[416.5064392089844,200],"flags":{},"order":40,"mode":0,"inputs":[{"label":"prev_lora","name":"prev_lora","shape":7,"type":"WANVIDLORA"},{"label":"blocks","name":"blocks","shape":7,"type":"SELECTEDBLOCKS"},{"label":"lora","name":"lora","type":"COMBO","widget":{"name":"lora"}},{"label":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"}},{"label":"low_mem_load","name":"low_mem_load","shape":7,"type":"BOOLEAN","widget":{"name":"low_mem_load"}},{"label":"merge_loras","name":"merge_loras","shape":7,"type":"BOOLEAN","widget":{"name":"merge_loras"}}],"outputs":[{"label":"lora","name":"lora","type":"WANVIDLORA","links":[629]}],"properties":{"Node name for S&R":"WanVideoLoraSelect","widget_ue_connectable":{}},"widgets_values":["BounceHighWan2_2.safetensors",2.0000000000000004,false,false]},{"id":374,"type":"LoraLoaderModelOnly","pos":[-5320.2451171875,-1974.4378662109375],"size":[410.3609619140625,109.68879699707031],"flags":{},"order":65,"mode":0,"inputs":[{"label":"模型","name":"model","type":"MODEL","link":667},{"name":"lora_name","type":"COMBO","widget":{"name":"lora_name"}},{"name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"}}],"outputs":[{"label":"模型","name":"MODEL","type":"MODEL","links":[668]}],"properties":{"Node name for S&R":"LoraLoaderModelOnly","cnr_id":"comfy-core","ver":"0.3.50","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["Qwen-Image-Lightning-8steps-V1.1.safetensors",1]},{"id":375,"type":"LoraLoaderModelOnly","pos":[-4839.70068359375,-2002.98828125],"size":[314.3731384277344,82],"flags":{},"order":77,"mode":0,"inputs":[{"label":"模型","name":"model","type":"MODEL","link":668},{"name":"lora_name","type":"COMBO","widget":{"name":"lora_name"}},{"name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"}}],"outputs":[{"label":"模型","name":"MODEL","type":"MODEL","links":[630]}],"properties":{"Node name for S&R":"LoraLoaderModelOnly","cnr_id":"comfy-core","ver":"0.3.50","widget_ue_connectable":{"lora_name":true,"strength_model":true}},"widgets_values":["beuauty10.safetensors",0.6000000000000001]},{"id":188,"type":"DownloadAndLoadGIMMVFIModel","pos":[3849.7421875,-315.5592346191406],"size":[351.5962219238281,141.24029541015625],"flags":{"collapsed":true},"order":41,"mode":4,"inputs":[{"label":"model","name":"model","type":"COMBO","widget":{"name":"model"}}],"outputs":[{"label":"gimmvfi_model","name":"gimmvfi_model","type":"GIMMVIF_MODEL","links":[303]}],"properties":{"Node name for S&R":"DownloadAndLoadGIMMVFIModel","cnr_id":"ComfyUI-GIMM-VFI","ver":"4c9a3123762af85e7c796e41737da0b70c75d72d","widget_ue_connectable":{}},"widgets_values":["gimmvfi_r_arb_lpips_fp32.safetensors"]},{"id":333,"type":"SimpleMath+","pos":[4226.20947265625,-610.2782592773438],"size":[270,98],"flags":{"collapsed":false},"order":60,"mode":4,"inputs":[{"name":"a","shape":7,"type":"*","link":609},{"name":"b","shape":7,"type":"*"},{"name":"c","shape":7,"type":"*"},{"name":"value","type":"STRING","widget":{"name":"value"}}],"outputs":[{"label":"整数","name":"INT","type":"INT","links":[]},{"label":"浮点","name":"FLOAT","type":"FLOAT","links":[]}],"properties":{"Node name for S&R":"SimpleMath+","widget_ue_connectable":{}},"widgets_values":["a*2"]},{"id":382,"type":"easy cleanGpuUsed","pos":[-1875.1065673828125,-1582.0789794921875],"size":[140,26],"flags":{},"order":106,"mode":0,"inputs":[{"label":"输入任何","name":"anything","type":"*","link":692}],"outputs":[{"name":"output","type":"*","links":[682]}],"properties":{"Node name for S&R":"easy cleanGpuUsed","widget_ue_connectable":{}},"widgets_values":[]},{"id":162,"type":"GetNode","pos":[1755.742431640625,-1609.225341796875],"size":[210,60],"flags":{"collapsed":true},"order":42,"mode":0,"inputs":[],"outputs":[{"name":"WANVAE","type":"WANVAE","links":[279]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["VAE"],"color":"#322","bgcolor":"#533"},{"id":27,"type":"WanVideoSampler","pos":[1596.6934814453125,-1513.92236328125],"size":[327.5901184082031,735.63134765625],"flags":{},"order":92,"mode":0,"inputs":[{"label":"model","name":"model","type":"WANVIDEOMODEL","link":63},{"label":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":84},{"label":"text_embeds","name":"text_embeds","shape":7,"type":"WANVIDEOTEXTEMBEDS","link":281},{"label":"samples","name":"samples","shape":7,"type":"LATENT"},{"label":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS"},{"label":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT"},{"label":"cache_args","name":"cache_args","shape":7,"type":"CACHEARGS"},{"label":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS"},{"label":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS"},{"label":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS"},{"label":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS"},{"label":"sigmas","name":"sigmas","shape":7,"type":"SIGMAS"},{"label":"unianimate_poses","name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE"},{"label":"fantasytalking_embeds","name":"fantasytalking_embeds","shape":7,"type":"FANTASYTALKING_EMBEDS"},{"label":"uni3c_embeds","name":"uni3c_embeds","shape":7,"type":"UNI3C_EMBEDS"},{"label":"multitalk_embeds","name":"multitalk_embeds","shape":7,"type":"MULTITALK_EMBEDS"},{"label":"freeinit_args","name":"freeinit_args","shape":7,"type":"FREEINITARGS"},{"label":"steps","name":"steps","type":"INT","widget":{"name":"steps"}},{"label":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"}},{"label":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"}},{"label":"seed","name":"seed","type":"INT","widget":{"name":"seed"}},{"label":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"}},{"label":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"}},{"label":"riflex_freq_index","name":"riflex_freq_index","type":"INT","widget":{"name":"riflex_freq_index"}},{"label":"denoise_strength","name":"denoise_strength","shape":7,"type":"FLOAT","widget":{"name":"denoise_strength"}},{"label":"batched_cfg","name":"batched_cfg","shape":7,"type":"BOOLEAN","widget":{"name":"batched_cfg"}},{"label":"rope_function","name":"rope_function","shape":7,"type":"COMBO","widget":{"name":"rope_function"}},{"label":"start_step","name":"start_step","shape":7,"type":"INT","widget":{"name":"start_step"}},{"label":"end_step","name":"end_step","shape":7,"type":"INT","widget":{"name":"end_step"}},{"label":"add_noise_to_samples","name":"add_noise_to_samples","shape":7,"type":"BOOLEAN","widget":{"name":"add_noise_to_samples"}}],"outputs":[{"label":"samples","name":"samples","type":"LATENT","slot_index":0,"links":[33]},{"label":"denoised_samples","name":"denoised_samples","type":"LATENT"}],"properties":{"Node name for S&R":"WanVideoSampler","cnr_id":"ComfyUI-WanVideoWrapper","ver":"e5ef9752a7e846b232fc05fd993327a2e870a788","widget_ue_connectable":{}},"widgets_values":[4,1,8.000000000000002,666,"fixed",true,"flowmatch_distill",0,1,"","comfy",0,-1,false]},{"id":42,"type":"GetImageSizeAndCount","pos":[2317.6640625,-1551.8514404296875],"size":[190.86483764648438,86],"flags":{},"order":100,"mode":0,"inputs":[{"label":"图像","name":"image","type":"IMAGE","link":48}],"outputs":[{"label":"图像","name":"image","type":"IMAGE","slot_index":0,"links":[423,693]},{"label":"宽度","name":"width","type":"INT"},{"label":"高度","name":"height","type":"INT"},{"label":"数量","name":"count","type":"INT"}],"properties":{"Node name for S&R":"GetImageSizeAndCount","cnr_id":"comfyui-kjnodes","ver":"36f6fdd7d4c393675ac622bd300ef667ee65d8b8","widget_ue_connectable":{}},"widgets_values":[]},{"id":349,"type":"VAEDecode","pos":[-2859.69970703125,-1703.283203125],"size":[140,46],"flags":{},"order":102,"mode":0,"inputs":[{"label":"Latent","name":"samples","type":"LATENT","link":632},{"label":"VAE","name":"vae","type":"VAE","link":633}],"outputs":[{"label":"图像","name":"IMAGE","type":"IMAGE","links":[692,696]}],"properties":{"Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":368,"type":"CLIPLoader","pos":[-4537.6845703125,-1755.6170654296875],"size":[330,110],"flags":{},"order":43,"mode":0,"inputs":[{"name":"clip_name","type":"COMBO","widget":{"name":"clip_name"}},{"name":"type","type":"COMBO","widget":{"name":"type"}},{"name":"device","shape":7,"type":"COMBO","widget":{"name":"device"}}],"outputs":[{"label":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[664]}],"properties":{"Node name for S&R":"CLIPLoader","cnr_id":"comfy-core","hasSecondTab":false,"models":[{"name":"qwen_2.5_vl_7b_fp8_scaled.safetensors","directory":"text_encoders","url":"https://huggingface.co/Comfy-Org/Qwen-Image_ComfyUI/resolve/main/split_files/text_encoders/qwen_2.5_vl_7b_fp8_scaled.safetensors"}],"ver":"0.3.48","widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"tabXOffset":10},"widgets_values":["qwen_2.5_vl_7b.safetensors","qwen_image","default"]},{"id":350,"type":"VAEEncode","pos":[-3505.77783203125,-1198.1522216796875],"size":[197.5585479736328,51.189971923828125],"flags":{"collapsed":false},"order":68,"mode":0,"inputs":[{"label":"图像","name":"pixels","type":"IMAGE","link":684},{"label":"VAE","name":"vae","type":"VAE","link":635}],"outputs":[{"label":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[663]}],"properties":{"Node name for S&R":"VAEEncode","cnr_id":"comfy-core","ver":"0.3.39","widget_ue_connectable":{}},"widgets_values":[]},{"id":379,"type":"RH_ExtractImage","pos":[-4657.54345703125,-1156.166748046875],"size":[311.5132751464844,58],"flags":{},"order":59,"mode":0,"inputs":[{"label":"images","name":"images","type":"IMAGE","link":669},{"label":"image_index","name":"image_index","type":"INT","widget":{"name":"image_index"}}],"outputs":[{"label":"image","name":"image","type":"IMAGE","links":[684,690]}],"properties":{"Node name for S&R":"RH_ExtractImage","widget_ue_connectable":{}},"widgets_values":[0]},{"id":380,"type":"GetNode","pos":[-4973.26904296875,-1176.1905517578125],"size":[210,58],"flags":{"collapsed":false},"order":44,"mode":0,"inputs":[],"outputs":[{"label":"输出","name":"IMAGE","type":"IMAGE","links":[669]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["input_video"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":372,"type":"KSampler","pos":[-3242.205078125,-1705.6240234375],"size":[267.6554870605469,402.9888916015625],"flags":{},"order":99,"mode":0,"inputs":[{"label":"模型","name":"model","type":"MODEL","link":660},{"label":"正面条件","name":"positive","type":"CONDITIONING","link":661},{"label":"负面条件","name":"negative","type":"CONDITIONING","link":662},{"label":"Latent","name":"latent_image","type":"LATENT","link":663},{"name":"seed","type":"INT","widget":{"name":"seed"}},{"name":"steps","type":"INT","widget":{"name":"steps"}},{"name":"cfg","type":"FLOAT","widget":{"name":"cfg"}},{"name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"}},{"name":"scheduler","type":"COMBO","widget":{"name":"scheduler"}},{"name":"denoise","type":"FLOAT","widget":{"name":"denoise"}}],"outputs":[{"label":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[632]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","hasSecondTab":false,"ver":"0.3.48","widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"tabXOffset":10},"widgets_values":[1496,"fixed",8,1,"ddim","linear_quadratic",1],"color":"#322","bgcolor":"#533"},{"id":364,"type":"LoraLoaderModelOnly","pos":[-5768.28759765625,-1974.43701171875],"size":[373.5364990234375,82.92295837402344],"flags":{},"order":56,"mode":0,"inputs":[{"label":"模型","name":"model","type":"MODEL","link":652},{"name":"lora_name","type":"COMBO","widget":{"name":"lora_name"}},{"name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"}}],"outputs":[{"label":"模型","name":"MODEL","type":"MODEL","links":[667]}],"properties":{"Node name for S&R":"LoraLoaderModelOnly","cnr_id":"comfy-core","hasSecondTab":false,"models":[{"name":"Qwen-Image-Lightning-4steps-V1.0.safetensors","directory":"loras","url":"https://huggingface.co/lightx2v/Qwen-Image-Lightning/resolve/main/Qwen-Image-Lightning-4steps-V1.0.safetensors"}],"ver":"0.3.50","ue_properties":{"widget_ue_connectable":{"lora_name":true,"strength_model":true}},"secondTabOffset":80,"tabWidth":65,"secondTabWidth":65,"widget_ue_connectable":{},"secondTabText":"Send Back","enableTabs":false,"tabXOffset":10},"widgets_values":["qwen_image_edit_remove-clothing_v1.0.safetensors",1.0000000000000002]},{"id":371,"type":"ConditioningZeroOut","pos":[-3444.56494140625,-1644.4859619140625],"size":[197.712890625,26],"flags":{"collapsed":true},"order":79,"mode":0,"inputs":[{"label":"条件","name":"conditioning","type":"CONDITIONING","link":659}],"outputs":[{"label":"条件","name":"CONDITIONING","type":"CONDITIONING","links":[662]}],"properties":{"Node name for S&R":"ConditioningZeroOut","cnr_id":"comfy-core","ver":"0.3.50","widget_ue_connectable":{}},"widgets_values":[]},{"id":373,"type":"TextEncodeQwenImageEditPlusAdvance_lrzjason","pos":[-3935.20361328125,-1765.5462646484375],"size":[450.0015563964844,378],"flags":{},"order":69,"mode":0,"inputs":[{"label":"clip","name":"clip","type":"CLIP","link":664},{"label":"vae","name":"vae","shape":7,"type":"VAE","link":665},{"label":"vl_resize_image1","name":"vl_resize_image1","shape":7,"type":"IMAGE","link":690},{"label":"vl_resize_image2","name":"vl_resize_image2","shape":7,"type":"IMAGE"},{"label":"vl_resize_image3","name":"vl_resize_image3","shape":7,"type":"IMAGE"},{"label":"not_resize_image1","name":"not_resize_image1","shape":7,"type":"IMAGE"},{"label":"not_resize_image2","name":"not_resize_image2","shape":7,"type":"IMAGE"},{"label":"not_resize_image3","name":"not_resize_image3","shape":7,"type":"IMAGE"},{"label":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"}},{"label":"target_size","name":"target_size","shape":7,"type":"COMBO","widget":{"name":"target_size"}},{"label":"target_vl_size","name":"target_vl_size","shape":7,"type":"COMBO","widget":{"name":"target_vl_size"}},{"label":"upscale_method","name":"upscale_method","shape":7,"type":"COMBO","widget":{"name":"upscale_method"}},{"label":"crop","name":"crop","shape":7,"type":"COMBO","widget":{"name":"crop"}},{"label":"instruction","name":"instruction","shape":7,"type":"STRING","widget":{"name":"instruction"}}],"outputs":[{"label":"conditioning","name":"conditioning","type":"CONDITIONING","links":[659,661]},{"label":"latent","name":"latent","type":"LATENT"},{"label":"target_image1","name":"target_image1","type":"IMAGE"},{"label":"target_image2","name":"target_image2","type":"IMAGE"},{"label":"target_image3","name":"target_image3","type":"IMAGE"},{"label":"vl_resized_image1","name":"vl_resized_image1","type":"IMAGE"},{"label":"vl_resized_image2","name":"vl_resized_image2","type":"IMAGE"},{"label":"vl_resized_image3","name":"vl_resized_image3","type":"IMAGE"}],"properties":{"Node name for S&R":"TextEncodeQwenImageEditPlusAdvance_lrzjason","widget_ue_connectable":{}},"widgets_values":["脱掉女孩身上的所有衣服裤子裙子，女孩变为赤身裸体，36d大胸,big breast",1024,384,"lanczos","center","Describe the key features of the input image (color, shape, size, texture, objects, background), then explain how the user's text instruction should alter or modify the image. Generate a new image that meets the user's requirements while maintaining consistency with the original input where appropriate."]},{"id":390,"type":"PreviewImage","pos":[-2651.509765625,-1603.5711669921875],"size":[140,246],"flags":{},"order":107,"mode":4,"inputs":[{"label":"图像","name":"images","type":"IMAGE","link":696}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":177,"type":"VHS_LoadVideo","pos":[91.201171875,-2421.378662109375],"size":[378.7124938964844,551.1203002929688],"flags":{},"order":64,"mode":0,"inputs":[{"label":"批次管理","name":"meta_batch","shape":7,"type":"VHS_BatchManager"},{"name":"vae","shape":7,"type":"VAE"},{"name":"video","type":"STRING","widget":{"name":"video"}},{"name":"force_rate","type":"INT","widget":{"name":"force_rate"},"link":600},{"name":"force_size","type":"COMBO","widget":{"name":"force_size"}},{"name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":574},{"name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":575},{"name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"}},{"name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"}},{"name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"}},{"name":"format","shape":7,"type":"COMBO","widget":{"name":"format"}}],"outputs":[{"label":"图像","name":"IMAGE","type":"IMAGE","links":[469,492]},{"label":"帧计数","name":"frame_count","type":"INT","links":[294]},{"label":"音频","name":"audio","type":"AUDIO","links":[295]},{"label":"视频信息","name":"video_info","type":"VHS_VIDEOINFO"}],"properties":{"Node name for S&R":"VHS_LoadVideo","cnr_id":"comfyui-videohelpersuite","ver":"8e4d79471bf1952154768e8435a9300077b534fa","widget_ue_connectable":{"custom_height":true,"custom_width":true,"frame_load_cap":true}},"widgets_values":{"video":"ee18136b0e2219f8a8aa8ab5c2155a1884fad80ef0389cc821710767d715b4bc.mp4","force_rate":16,"force_size":"Custom","custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"format":"Wan","choose video to upload":"image","videopreview":{"paused":false,"hidden":false,"params":{"custom_height":544,"filename":"ee18136b0e2219f8a8aa8ab5c2155a1884fad80ef0389cc821710767d715b4bc.mp4","force_rate":16,"custom_width":960,"select_every_nth":1,"frame_load_cap":0,"format":"video/mp4","skip_first_frames":0,"type":"input"}}}},{"id":391,"type":"MarkdownNote","pos":[22.88833999633789,-2699.485107421875],"size":[468.3672790527344,187.02273559570312],"flags":{},"order":45,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["# upload your video to control your image"],"color":"#432","bgcolor":"#653"},{"id":149,"type":"GetNode","pos":[2744.405029296875,-633.4214477539062],"size":[210,60],"flags":{"collapsed":false},"order":46,"mode":0,"inputs":[],"outputs":[{"name":"AUDIO","type":"AUDIO","links":[694]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["input_audio"]},{"id":334,"type":"GetNode","pos":[2861.4931640625,-494.0758361816406],"size":[210,58],"flags":{"collapsed":false},"order":47,"mode":0,"inputs":[],"outputs":[{"name":"FLOAT","type":"FLOAT","links":[609,695]}],"properties":{"widget_ue_connectable":{}},"widgets_values":["fps"],"color":"#232","bgcolor":"#353"},{"id":388,"type":"VHS_VideoCombine","pos":[3312.604248046875,-434.9158935546875],"size":[210,358],"flags":{},"order":104,"mode":0,"inputs":[{"label":"图像","name":"images","type":"IMAGE","link":693},{"label":"音频","name":"audio","shape":7,"type":"AUDIO","link":694},{"label":"批次管理","name":"meta_batch","shape":7,"type":"VHS_BatchManager"},{"name":"vae","shape":7,"type":"VAE"},{"name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":695},{"name":"loop_count","type":"INT","widget":{"name":"loop_count"}},{"name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"}},{"name":"format","type":"COMBO","widget":{"name":"format"}},{"name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"}},{"name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"}},{"name":"no_preview","shape":7,"type":"BOOLEAN","widget":{"name":"no_preview"}}],"outputs":[{"label":"文件名","name":"Filenames","type":"VHS_FILENAMES"}],"properties":{"Node name for S&R":"VHS_VideoCombine","widget_ue_connectable":{}},"widgets_values":{"frame_rate":8,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"no_preview":false,"videopreview":{"paused":false,"hidden":false,"params":{}}}},{"id":385,"type":"MarkdownNote","pos":[4530.67529296875,-507.59661865234375],"size":[468.3672790527344,187.02273559570312],"flags":{},"order":48,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["# Opening this will make the video play smoother and zhe fps should be double"],"color":"#432","bgcolor":"#653"},{"id":164,"type":"MarkdownNote","pos":[-1472.19287109375,-658.3426513671875],"size":[541.7905883789062,240.68362426757812],"flags":{},"order":49,"mode":0,"inputs":[],"outputs":[],"title":"Markdown Note: Model Links","properties":{"widget_ue_connectable":{}},"widgets_values":["Model links:\n\n[https://huggingface.co/Kijai/WanVideo_comfy_fp8_scaled/tree/main/WanAnimate](https://huggingface.co/Kijai/WanVideo_comfy_fp8_scaled/tree/main/WanAnimate)\n\nLoRA:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lightx2v](https://huggingface.co/Kijai/WanVideo_comfy/tree/main/Lightx2v)\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/WanAnimate_relight_lora_fp16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/WanAnimate_relight_lora_fp16.safetensors)\n\n[https://huggingface.co/eddy1111111/lightx2v_it2v_adaptive_fusionv_1.safetensors/tree/main](https://huggingface.co/eddy1111111/lightx2v_it2v_adaptive_fusionv_1.safetensors/tree/main)\n\nText encoder:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/umt5-xxl-enc-bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/umt5-xxl-enc-bf16.safetensors)\n\nVAE:\n\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VAE_bf16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_VAE_bf16.safetensors)"],"color":"#432","bgcolor":"#653"}],"links":[[33,27,0,28,1,"LATENT"],[48,28,0,42,0,"IMAGE"],[59,22,0,48,0,"WANVIDEOMODEL"],[62,48,0,50,0,"WANVIDEOMODEL"],[63,50,0,27,0,"WANVIDEOMODEL"],[64,51,0,50,1,"BLOCKSWAPARGS"],[84,62,0,27,1,"WANVIDIMAGE_EMBEDS"],[97,71,0,70,0,"CLIP_VISION"],[100,35,0,22,0,"WANCOMPILEARGS"],[198,100,0,108,0,"MASK"],[235,133,0,70,1,"IMAGE"],[245,108,0,142,0,"*"],[246,142,0,99,1,"MASK"],[265,155,0,62,7,"INT"],[266,156,0,62,8,"INT"],[268,158,0,62,9,"INT"],[278,38,0,161,0,"*"],[279,162,0,28,0,"WANVAE"],[280,163,0,62,0,"WANVAE"],[281,65,0,27,2,"WANVIDEOTEXTEMBEDS"],[282,133,0,62,2,"IMAGE"],[294,177,1,157,0,"INT"],[295,177,2,148,0,"AUDIO"],[303,188,0,187,0,"GIMMVIF_MODEL"],[387,70,0,62,1,"WANVIDIMAGE_CLIPEMBEDS"],[412,138,0,62,4,"IMAGE"],[423,42,0,187,1,"IMAGE"],[454,102,0,243,0,"SAM2MODEL"],[456,243,0,100,0,"MASK"],[468,224,0,246,0,"POSEMODEL"],[469,177,0,246,1,"IMAGE"],[476,246,2,243,2,"STRING"],[477,246,0,247,0,"POSEDATA"],[480,247,0,248,0,"*"],[483,141,0,62,3,"IMAGE"],[492,177,0,144,0,"IMAGE"],[493,144,0,243,1,"IMAGE"],[500,263,0,247,1,"INT"],[501,264,0,247,2,"INT"],[502,265,0,246,3,"INT"],[503,266,0,246,4,"INT"],[527,289,0,283,0,"*"],[528,292,0,283,1,"*"],[529,300,0,283,2,"BOOLEAN"],[530,292,0,284,0,"*"],[531,289,0,284,1,"*"],[532,300,0,284,2,"BOOLEAN"],[533,290,0,289,0,"INT"],[534,288,0,290,0,"*"],[535,286,0,290,1,"*"],[536,298,0,290,2,"BOOLEAN"],[537,285,0,291,0,"*"],[538,287,0,291,1,"*"],[539,298,0,291,2,"BOOLEAN"],[540,291,0,292,0,"INT"],[541,294,0,293,0,"*"],[542,295,0,293,3,"BOOLEAN"],[543,293,0,298,0,"BOOLEAN"],[544,296,0,299,0,"*"],[545,297,0,299,3,"BOOLEAN"],[546,299,0,300,0,"BOOLEAN"],[547,283,0,153,0,"*"],[548,284,0,154,0,"*"],[551,303,0,64,2,"INT"],[552,304,0,64,3,"INT"],[556,308,0,305,0,"*"],[557,305,0,179,0,"INT"],[574,302,0,177,5,"INT"],[575,301,0,177,6,"INT"],[592,146,0,99,0,"IMAGE"],[597,246,1,233,0,"IMAGE"],[598,99,0,130,0,"IMAGE"],[600,330,0,177,3,"INT"],[601,329,0,331,0,"*"],[602,331,0,305,1,"*"],[603,309,0,330,0,"FLOAT"],[609,334,0,333,0,"*"],[615,64,0,339,0,"IMAGE"],[616,339,0,128,0,"IMAGE"],[617,131,0,62,5,"IMAGE"],[618,143,0,62,6,"MASK"],[619,343,0,342,0,"WANVIDLORA"],[624,342,0,48,1,"WANVIDLORA"],[629,346,0,343,0,"WANVIDLORA"],[630,375,0,347,0,"MODEL"],[631,347,0,348,0,"MODEL"],[632,372,0,349,0,"LATENT"],[633,369,0,349,1,"VAE"],[635,369,0,350,1,"VAE"],[652,363,0,364,0,"MODEL"],[658,348,0,370,0,"MODEL"],[659,373,0,371,0,"CONDITIONING"],[660,370,0,372,0,"MODEL"],[661,373,0,372,1,"CONDITIONING"],[662,371,0,372,2,"CONDITIONING"],[663,350,0,372,3,"LATENT"],[664,368,0,373,0,"CLIP"],[665,369,0,373,1,"VAE"],[667,364,0,374,0,"MODEL"],[668,374,0,375,0,"MODEL"],[669,380,0,379,0,"IMAGE"],[682,382,0,64,0,"IMAGE"],[684,379,0,350,0,"IMAGE"],[690,379,0,373,2,"IMAGE"],[692,349,0,382,0,"*"],[693,42,0,388,0,"IMAGE"],[694,149,0,388,1,"AUDIO"],[695,334,0,388,4,"FLOAT"],[696,349,0,390,0,"IMAGE"]],"groups":[{"id":1,"title":"Reference Image","bounding":[-1505.038330078125,-1660.6768798828125,573.5203247070312,438.44268798828125],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Background Masking","bounding":[50.169761657714844,-2516.146484375,2404.081298828125,846.0611572265625],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Models","bounding":[-1505.302734375,-1200.840087890625,2150.996826171875,956.7974243164062],"color":"#88A","font_size":24,"flags":{}},{"id":7,"title":"Group","bounding":[678.0247802734375,-1643.73828125,1801.0528564453125,1409.8681640625],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"VHS_KeepIntermediate":true,"links_added_by_ue":[],"VHS_MetadataImage":true,"ue_links":[],"0246.VERSION":[0,0,4],"VHS_latentpreviewrate":0,"frontendVersion":"1.23.0","VHS_latentpreview":false,"node_versions":{"ComfyUI-WanVideoWrapper":"5a2383621a05825d0d0437781afcb8552d9590fd","ComfyUI-VideoHelperSuite":"0a75c7958fe320efcb052f1d9f8451fd20c730a8","ComfyUI-KJNodes":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f"},"ds":{"scale":0.15772225476662743,"offset":[5332.952211195975,3943.480755221673]}},"version":0.4}